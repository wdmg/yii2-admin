!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e():"function"==typeof define&&define.amd?define(e):e()}(0,(function(){"use strict";var t=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();
/**
 * Sticky Sidebar JavaScript Plugin.
 * @version 3.3.1
 * @author Ahmed Bouhuolia <a.bouhuolia@gmail.com>
 * @license The MIT License (MIT)
 */
var e=function(){var e=".stickySidebar",i={topSpacing:0,bottomSpacing:0,containerSelector:!1,innerWrapperSelector:".inner-wrapper-sticky",stickyClass:"is-affixed",resizeSensor:!0,minWidth:!1},n=function(){function n(t){var e=this,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.options=n.extend(i,s),this.sidebar="string"==typeof t?document.querySelector(t):t,void 0===this.sidebar)throw new Error("There is no specific sidebar element.");this.sidebarInner=!1,this.container=this.sidebar.parentElement,this.affixedType="STATIC",this.direction="down",this.support={transform:!1,transform3d:!1},this._initialized=!1,this._reStyle=!1,this._breakpoint=!1,this._resizeListeners=[],this.dimensions={translateY:0,topSpacing:0,lastTopSpacing:0,bottomSpacing:0,lastBottomSpacing:0,sidebarHeight:0,sidebarWidth:0,containerTop:0,containerHeight:0,viewportHeight:0,viewportTop:0,lastViewportTop:0},["handleEvent"].forEach((function(t){e[t]=e[t].bind(e)})),this.initialize()}return t(n,[{key:"initialize",value:function(){var t=this;if(this._setSupportFeatures(),this.options.innerWrapperSelector&&(this.sidebarInner=this.sidebar.querySelector(this.options.innerWrapperSelector),null===this.sidebarInner&&(this.sidebarInner=!1)),!this.sidebarInner){var e=document.createElement("div");for(e.setAttribute("class","inner-wrapper-sticky"),this.sidebar.appendChild(e);this.sidebar.firstChild!=e;)e.appendChild(this.sidebar.firstChild);this.sidebarInner=this.sidebar.querySelector(".inner-wrapper-sticky")}if(this.options.containerSelector){var i=document.querySelectorAll(this.options.containerSelector);if((i=Array.prototype.slice.call(i)).forEach((function(e,i){e.contains(t.sidebar)&&(t.container=e)})),!i.length)throw new Error("The container does not contains on the sidebar.")}"function"!=typeof this.options.topSpacing&&(this.options.topSpacing=parseInt(this.options.topSpacing)||0),"function"!=typeof this.options.bottomSpacing&&(this.options.bottomSpacing=parseInt(this.options.bottomSpacing)||0),this._widthBreakpoint(),this.calcDimensions(),this.stickyPosition(),this.bindEvents(),this._initialized=!0}},{key:"bindEvents",value:function(){window.addEventListener("resize",this,{passive:!0,capture:!1}),window.addEventListener("scroll",this,{passive:!0,capture:!1}),this.sidebar.addEventListener("update"+e,this),this.options.resizeSensor&&"undefined"!=typeof ResizeSensor&&(new ResizeSensor(this.sidebarInner,this.handleEvent),new ResizeSensor(this.container,this.handleEvent))}},{key:"handleEvent",value:function(t){this.updateSticky(t)}},{key:"calcDimensions",value:function(){if(!this._breakpoint){var t=this.dimensions;t.containerTop=n.offsetRelative(this.container).top,t.containerHeight=this.container.clientHeight,t.containerBottom=t.containerTop+t.containerHeight,t.sidebarHeight=this.sidebarInner.offsetHeight,t.sidebarWidth=this.sidebar.offsetWidth,t.viewportHeight=window.innerHeight,this._calcDimensionsWithScroll()}}},{key:"_calcDimensionsWithScroll",value:function(){var t=this.dimensions;t.sidebarLeft=n.offsetRelative(this.sidebar).left,t.viewportTop=document.documentElement.scrollTop||document.body.scrollTop,t.viewportBottom=t.viewportTop+t.viewportHeight,t.viewportLeft=document.documentElement.scrollLeft||document.body.scrollLeft,t.topSpacing=this.options.topSpacing,t.bottomSpacing=this.options.bottomSpacing,"function"==typeof t.topSpacing&&(t.topSpacing=parseInt(t.topSpacing(this.sidebar))||0),"function"==typeof t.bottomSpacing&&(t.bottomSpacing=parseInt(t.bottomSpacing(this.sidebar))||0),"VIEWPORT-TOP"===this.affixedType?t.topSpacing<t.lastTopSpacing&&(t.translateY+=t.lastTopSpacing-t.topSpacing,this._reStyle=!0):"VIEWPORT-BOTTOM"===this.affixedType&&t.bottomSpacing<t.lastBottomSpacing&&(t.translateY+=t.lastBottomSpacing-t.bottomSpacing,this._reStyle=!0),t.lastTopSpacing=t.topSpacing,t.lastBottomSpacing=t.bottomSpacing}},{key:"isSidebarFitsViewport",value:function(){return this.dimensions.sidebarHeight<this.dimensions.viewportHeight}},{key:"observeScrollDir",value:function(){var t=this.dimensions;if(t.lastViewportTop!==t.viewportTop){var e="down"===this.direction?Math.min:Math.max;t.viewportTop===e(t.viewportTop,t.lastViewportTop)&&(this.direction="down"===this.direction?"up":"down")}}},{key:"getAffixType",value:function(){var t=this.dimensions,e=!1;this._calcDimensionsWithScroll();var i=t.sidebarHeight+t.containerTop,n=t.viewportTop+t.topSpacing,s=t.viewportBottom-t.bottomSpacing;return"up"===this.direction?n<=t.containerTop?(t.translateY=0,e="STATIC"):n<=t.translateY+t.containerTop?(t.translateY=n-t.containerTop,e="VIEWPORT-TOP"):!this.isSidebarFitsViewport()&&t.containerTop<=n&&(e="VIEWPORT-UNBOTTOM"):this.isSidebarFitsViewport()?t.sidebarHeight+n>=t.containerBottom?(t.translateY=t.containerBottom-i,e="CONTAINER-BOTTOM"):n>=t.containerTop&&(t.translateY=n-t.containerTop,e="VIEWPORT-TOP"):t.containerBottom<=s?(t.translateY=t.containerBottom-i,e="CONTAINER-BOTTOM"):i+t.translateY<=s?(t.translateY=s-i,e="VIEWPORT-BOTTOM"):t.containerTop+t.translateY<=n&&(e="VIEWPORT-UNBOTTOM"),t.translateY=Math.max(0,t.translateY),t.translateY=Math.min(t.containerHeight,t.translateY),t.lastViewportTop=t.viewportTop,e}},{key:"_getStyle",value:function(t){if(void 0!==t){var e={inner:{},outer:{}},i=this.dimensions;switch(t){case"VIEWPORT-TOP":e.inner={position:"fixed",top:i.topSpacing,left:i.sidebarLeft-i.viewportLeft,width:i.sidebarWidth};break;case"VIEWPORT-BOTTOM":e.inner={position:"fixed",top:"auto",left:i.sidebarLeft,bottom:i.bottomSpacing,width:i.sidebarWidth};break;case"CONTAINER-BOTTOM":case"VIEWPORT-UNBOTTOM":var s=this._getTranslate(0,i.translateY+"px");e.inner=s?{transform:s}:{position:"absolute",top:i.translateY,width:i.sidebarWidth}}switch(t){case"VIEWPORT-TOP":case"VIEWPORT-BOTTOM":case"VIEWPORT-UNBOTTOM":case"CONTAINER-BOTTOM":e.outer={height:i.sidebarHeight,position:"relative"}}return e.outer=n.extend({height:"",position:""},e.outer),e.inner=n.extend({position:"relative",top:"",left:"",bottom:"",width:"",transform:this._getTranslate()},e.inner),e}}},{key:"stickyPosition",value:function(t){if(!this._breakpoint){t=this._reStyle||t||!1;var i=this.getAffixType(),s=this._getStyle(i);if((this.affixedType!=i||t)&&i){var o="affix."+i.toLowerCase().replace("viewport-","")+e;for(var r in n.eventTrigger(this.sidebar,o),"STATIC"===i?n.removeClass(this.sidebar,this.options.stickyClass):n.addClass(this.sidebar,this.options.stickyClass),s.outer)this.sidebar.style[r]=s.outer[r];for(var a in s.inner){var p="number"==typeof s.inner[a]?"px":"";this.sidebarInner.style[a]=s.inner[a]+p}var c="affixed."+i.toLowerCase().replace("viewport-","")+e;n.eventTrigger(this.sidebar,c)}else this._initialized&&(this.sidebarInner.style.left=s.inner.left);this.affixedType=i}}},{key:"_widthBreakpoint",value:function(){window.innerWidth<=this.options.minWidth?(this._breakpoint=!0,this.affixedType="STATIC",this.sidebar.removeAttribute("style"),n.removeClass(this.sidebar,this.options.stickyClass),this.sidebarInner.removeAttribute("style")):this._breakpoint=!1}},{key:"updateSticky",value:function(){var t,e=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._running||(this._running=!0,t=i.type,requestAnimationFrame((function(){"scroll"===t?(e._calcDimensionsWithScroll(),e.observeScrollDir(),e.stickyPosition()):(e._widthBreakpoint(),e.calcDimensions(),e.stickyPosition(!0)),e._running=!1})))}},{key:"_setSupportFeatures",value:function(){var t=this.support;t.transform=n.supportTransform(),t.transform3d=n.supportTransform(!0)}},{key:"_getTranslate",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.support.transform3d?"translate3d("+t+", "+e+", "+i+")":!!this.support.translate&&"translate("+t+", "+e+")"}},{key:"destroy",value:function(){window.removeEventListener("resize",this,{caption:!1}),window.removeEventListener("scroll",this,{caption:!1}),this.sidebar.classList.remove(this.options.stickyClass),this.sidebar.style.minHeight="",this.sidebar.removeEventListener("update"+e,this);var t={inner:{},outer:{}};for(var i in t.inner={position:"",top:"",left:"",bottom:"",width:"",transform:""},t.outer={height:"",position:""},t.outer)this.sidebar.style[i]=t.outer[i];for(var n in t.inner)this.sidebarInner.style[n]=t.inner[n];this.options.resizeSensor&&"undefined"!=typeof ResizeSensor&&(ResizeSensor.detach(this.sidebarInner,this.handleEvent),ResizeSensor.detach(this.container,this.handleEvent))}}],[{key:"supportTransform",value:function(t){var e=!1,i=t?"perspective":"transform",n=i.charAt(0).toUpperCase()+i.slice(1),s=document.createElement("support").style;return(i+" "+["Webkit","Moz","O","ms"].join(n+" ")+n).split(" ").forEach((function(t,i){if(void 0!==s[t])return e=t,!1})),e}},{key:"eventTrigger",value:function(t,e,i){try{var n=new CustomEvent(e,{detail:i})}catch(t){(n=document.createEvent("CustomEvent")).initCustomEvent(e,!0,!0,i)}t.dispatchEvent(n)}},{key:"extend",value:function(t,e){var i={};for(var n in t)void 0!==e[n]?i[n]=e[n]:i[n]=t[n];return i}},{key:"offsetRelative",value:function(t){var e={left:0,top:0};do{var i=t.offsetTop,n=t.offsetLeft;isNaN(i)||(e.top+=i),isNaN(n)||(e.left+=n),t="BODY"===t.tagName?t.parentElement:t.offsetParent}while(t);return e}},{key:"addClass",value:function(t,e){n.hasClass(t,e)||(t.classList?t.classList.add(e):t.className+=" "+e)}},{key:"removeClass",value:function(t,e){n.hasClass(t,e)&&(t.classList?t.classList.remove(e):t.className=t.className.replace(new RegExp("(^|\\b)"+e.split(" ").join("|")+"(\\b|$)","gi")," "))}},{key:"hasClass",value:function(t,e){return t.classList?t.classList.contains(e):new RegExp("(^| )"+e+"( |$)","gi").test(t.className)}}]),n}();return n}();window.StickySidebar=e,function(){if("undefined"!=typeof window){var t=window.$||window.jQuery||window.Zepto,i="stickySidebar";if(t){t.fn.stickySidebar=function(n){return this.each((function(){var s=t(this),o=t(this).data(i);if(o||(o=new e(this,"object"==typeof n&&n),s.data(i,o)),"string"==typeof n){if(void 0===o[n]&&-1===["destroy","updateSticky"].indexOf(n))throw new Error('No method named "'+n+'"');o[n]()}}))},t.fn.stickySidebar.Constructor=e;var n=t.fn.stickySidebar;t.fn.stickySidebar.noConflict=function(){return t.fn.stickySidebar=n,this}}}}()}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3RpY2t5LXNpZGViYXIuanMiLCJuYW1lcyI6WyJnbG9iYWwiLCJmYWN0b3J5IiwiZXhwb3J0cyIsIm1vZHVsZSIsImRlZmluZSIsImFtZCIsInRoaXMiLCJfY3JlYXRlQ2xhc3MiLCJkZWZpbmVQcm9wZXJ0aWVzIiwidGFyZ2V0IiwicHJvcHMiLCJpIiwibGVuZ3RoIiwiZGVzY3JpcHRvciIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5Iiwia2V5IiwiQ29uc3RydWN0b3IiLCJwcm90b1Byb3BzIiwic3RhdGljUHJvcHMiLCJwcm90b3R5cGUiLCJTdGlja3lTaWRlYmFyIiwiRVZFTlRfS0VZIiwiREVGQVVMVFMiLCJ0b3BTcGFjaW5nIiwiYm90dG9tU3BhY2luZyIsImNvbnRhaW5lclNlbGVjdG9yIiwiaW5uZXJXcmFwcGVyU2VsZWN0b3IiLCJzdGlja3lDbGFzcyIsInJlc2l6ZVNlbnNvciIsIm1pbldpZHRoIiwic2lkZWJhciIsIl90aGlzIiwib3B0aW9ucyIsImFyZ3VtZW50cyIsInVuZGVmaW5lZCIsImluc3RhbmNlIiwiVHlwZUVycm9yIiwiX2NsYXNzQ2FsbENoZWNrIiwiZXh0ZW5kIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiRXJyb3IiLCJzaWRlYmFySW5uZXIiLCJjb250YWluZXIiLCJwYXJlbnRFbGVtZW50IiwiYWZmaXhlZFR5cGUiLCJkaXJlY3Rpb24iLCJzdXBwb3J0IiwidHJhbnNmb3JtIiwidHJhbnNmb3JtM2QiLCJfaW5pdGlhbGl6ZWQiLCJfcmVTdHlsZSIsIl9icmVha3BvaW50IiwiX3Jlc2l6ZUxpc3RlbmVycyIsImRpbWVuc2lvbnMiLCJ0cmFuc2xhdGVZIiwibGFzdFRvcFNwYWNpbmciLCJsYXN0Qm90dG9tU3BhY2luZyIsInNpZGViYXJIZWlnaHQiLCJzaWRlYmFyV2lkdGgiLCJjb250YWluZXJUb3AiLCJjb250YWluZXJIZWlnaHQiLCJ2aWV3cG9ydEhlaWdodCIsInZpZXdwb3J0VG9wIiwibGFzdFZpZXdwb3J0VG9wIiwiZm9yRWFjaCIsIm1ldGhvZCIsImJpbmQiLCJpbml0aWFsaXplIiwidmFsdWUiLCJfdGhpczIiLCJfc2V0U3VwcG9ydEZlYXR1cmVzIiwid3JhcHBlciIsImNyZWF0ZUVsZW1lbnQiLCJzZXRBdHRyaWJ1dGUiLCJhcHBlbmRDaGlsZCIsImZpcnN0Q2hpbGQiLCJjb250YWluZXJzIiwicXVlcnlTZWxlY3RvckFsbCIsIkFycmF5Iiwic2xpY2UiLCJjYWxsIiwiaXRlbSIsImNvbnRhaW5zIiwicGFyc2VJbnQiLCJfd2lkdGhCcmVha3BvaW50IiwiY2FsY0RpbWVuc2lvbnMiLCJzdGlja3lQb3NpdGlvbiIsImJpbmRFdmVudHMiLCJ3aW5kb3ciLCJhZGRFdmVudExpc3RlbmVyIiwicGFzc2l2ZSIsImNhcHR1cmUiLCJSZXNpemVTZW5zb3IiLCJoYW5kbGVFdmVudCIsImV2ZW50IiwidXBkYXRlU3RpY2t5IiwiZGltcyIsIm9mZnNldFJlbGF0aXZlIiwidG9wIiwiY2xpZW50SGVpZ2h0IiwiY29udGFpbmVyQm90dG9tIiwib2Zmc2V0SGVpZ2h0Iiwib2Zmc2V0V2lkdGgiLCJpbm5lckhlaWdodCIsIl9jYWxjRGltZW5zaW9uc1dpdGhTY3JvbGwiLCJzaWRlYmFyTGVmdCIsImxlZnQiLCJkb2N1bWVudEVsZW1lbnQiLCJzY3JvbGxUb3AiLCJib2R5Iiwidmlld3BvcnRCb3R0b20iLCJ2aWV3cG9ydExlZnQiLCJzY3JvbGxMZWZ0IiwiZnVydGhlc3QiLCJNYXRoIiwibWluIiwibWF4IiwiYWZmaXhUeXBlIiwic2lkZWJhckJvdHRvbSIsImNvbGxpZGVyVG9wIiwiY29sbGlkZXJCb3R0b20iLCJpc1NpZGViYXJGaXRzVmlld3BvcnQiLCJzdHlsZSIsImlubmVyIiwib3V0ZXIiLCJwb3NpdGlvbiIsIndpZHRoIiwiYm90dG9tIiwidHJhbnNsYXRlIiwiX2dldFRyYW5zbGF0ZSIsImhlaWdodCIsImZvcmNlIiwiZ2V0QWZmaXhUeXBlIiwiX2dldFN0eWxlIiwiYWZmaXhFdmVudCIsInRvTG93ZXJDYXNlIiwicmVwbGFjZSIsImV2ZW50VHJpZ2dlciIsInJlbW92ZUNsYXNzIiwiYWRkQ2xhc3MiLCJfa2V5IiwiX3VuaXQyIiwiYWZmaXhlZEV2ZW50IiwiaW5uZXJXaWR0aCIsInJlbW92ZUF0dHJpYnV0ZSIsImV2ZW50VHlwZSIsIl90aGlzMyIsIl9ydW5uaW5nIiwidHlwZSIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsIm9ic2VydmVTY3JvbGxEaXIiLCJzdXBwb3J0VHJhbnNmb3JtIiwieSIsIngiLCJ6IiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImNhcHRpb24iLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJtaW5IZWlnaHQiLCJzdHlsZVJlc2V0IiwiX2tleTIiLCJkZXRhY2giLCJyZXN1bHQiLCJwcm9wZXJ0eSIsInVwcGVyIiwiY2hhckF0IiwidG9VcHBlckNhc2UiLCJqb2luIiwic3BsaXQiLCJlbGVtZW50IiwiZXZlbnROYW1lIiwiZGF0YSIsIkN1c3RvbUV2ZW50IiwiZGV0YWlsIiwiZSIsImNyZWF0ZUV2ZW50IiwiaW5pdEN1c3RvbUV2ZW50IiwiZGlzcGF0Y2hFdmVudCIsImRlZmF1bHRzIiwicmVzdWx0cyIsIm9mZnNldFRvcCIsIm9mZnNldExlZnQiLCJpc05hTiIsInRhZ05hbWUiLCJvZmZzZXRQYXJlbnQiLCJjbGFzc05hbWUiLCJoYXNDbGFzcyIsImFkZCIsIlJlZ0V4cCIsInRlc3QiLCJwbHVnaW4iLCIkIiwialF1ZXJ5IiwiWmVwdG8iLCJEQVRBX05BTUVTUEFDRSIsImZuIiwic3RpY2t5U2lkZWJhciIsImNvbmZpZyIsImVhY2giLCIkdGhpcyIsImluZGV4T2YiLCJvbGQiLCJub0NvbmZsaWN0Il0sInNvdXJjZXMiOlsic3RpY2t5LXNpZGViYXIuanMiXSwibWFwcGluZ3MiOiJDQUFDLFNBQVVBLEVBQVFDLEdBQ0MsaUJBQVpDLFNBQTBDLG9CQUFYQyxPQUF5QkYsSUFDN0MsbUJBQVhHLFFBQXlCQSxPQUFPQyxJQUFNRCxPQUFP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VUFBa0JhLEVBQVFiLFVBQVUzRSxTQUFTd0csR0FBdUIsSUFBSUcsT0FBTyxRQUFVSCxFQUFZLFFBQVMsTUFBTUksS0FBS3BCLEVBQVFnQixVQUMvSSxLQUdLdkssQ0FDVCxDQTNwQm9CLEdBNnBCcEIsT0FBT0EsQ0FDVCxDQTN0Qm9CLEdBK3RCcEJxRSxPQUFPckUsY0FBZ0JBLEVBRXZCLFdBQ0UsR0FBSSxvQkFBdUJxRSxPQUEzQixDQUVBLElBQUl1RyxFQUFTdkcsT0FBT3dHLEdBQUt4RyxPQUFPeUcsUUFBVXpHLE9BQU8wRyxNQUM3Q0MsRUFBaUIsZ0JBR3JCLEdBQUlKLEVBQVEsQ0F1QlZBLEVBQU9LLEdBQUdDLGNBbEJVLFNBQVVDLEdBQzVCLE9BQU9yTSxLQUFLc00sTUFBSyxXQUNmLElBQUlDLEVBQVFULEVBQU85TCxNQUNmMkssRUFBT21CLEVBQU85TCxNQUFNMkssS0FBS3VCLEdBTzdCLEdBTEt2QixJQUNIQSxFQUFPLElBQUl6SixFQUFjbEIsS0FBdUIsaUJBQVZxTSxHQUFzQkEsR0FDNURFLEVBQU01QixLQUFLdUIsRUFBZ0J2QixJQUd6QixpQkFBb0IwQixFQUFRLENBQzlCLFFBQXFCckssSUFBakIySSxFQUFLMEIsS0FBMEUsSUFBakQsQ0FBQyxVQUFXLGdCQUFnQkcsUUFBUUgsR0FBZ0IsTUFBTSxJQUFJOUosTUFBTSxvQkFBc0I4SixFQUFTLEtBRXJJMUIsRUFBSzBCLElBQ1AsQ0FDRixHQUNGLEVBR0FQLEVBQU9LLEdBQUdDLGNBQWN0TCxZQUFjSSxFQUV0QyxJQUFJdUwsRUFBTVgsRUFBT0ssR0FBR0MsY0FLcEJOLEVBQU9LLEdBQUdDLGNBQWNNLFdBQWEsV0FFbkMsT0FEQVosRUFBT0ssR0FBR0MsY0FBZ0JLLEVBQ25Cek0sSUFDVCxDQUNGLENBekN5QyxDQTBDMUMsQ0EzQ0QsRUE2Q0MiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gKGdsb2JhbCwgZmFjdG9yeSkge1xuXHR0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcgPyBmYWN0b3J5KCkgOlxuXHR0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQgPyBkZWZpbmUoZmFjdG9yeSkgOlxuXHQoZmFjdG9yeSgpKTtcbn0odGhpcywgKGZ1bmN0aW9uICgpIHsgJ3VzZSBzdHJpY3QnO1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG4vKipcclxuICogU3RpY2t5IFNpZGViYXIgSmF2YVNjcmlwdCBQbHVnaW4uXHJcbiAqIEB2ZXJzaW9uIDMuMy4xXHJcbiAqIEBhdXRob3IgQWhtZWQgQm91aHVvbGlhIDxhLmJvdWh1b2xpYUBnbWFpbC5jb20+XHJcbiAqIEBsaWNlbnNlIFRoZSBNSVQgTGljZW5zZSAoTUlUKVxyXG4gKi9cbnZhciBTdGlja3lTaWRlYmFyID0gZnVuY3Rpb24gKCkge1xuXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAvLyAjIERlZmluZSBDb25zdGFudHNcbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIC8vXG4gIHZhciBFVkVOVF9LRVkgPSAnLnN0aWNreVNpZGViYXInO1xuICB2YXIgREVGQVVMVFMgPSB7XG5cbiAgICAvKipcclxuICAgICAqIEFkZGl0aW9uYWwgdG9wIHNwYWNpbmcgb2YgdGhlIGVsZW1lbnQgd2hlbiBpdCBiZWNvbWVzIHN0aWNreS5cclxuICAgICAqIEB0eXBlIHtOdW1lcmljfEZ1bmN0aW9ufVxyXG4gICAgICovXG4gICAgdG9wU3BhY2luZzogMCxcblxuICAgIC8qKlxyXG4gICAgICogQWRkaXRpb25hbCBib3R0b20gc3BhY2luZyBvZiB0aGUgZWxlbWVudCB3aGVuIGl0IGJlY29tZXMgc3RpY2t5LlxyXG4gICAgICogQHR5cGUge051bWVyaWN8RnVuY3Rpb259XHJcbiAgICAgKi9cbiAgICBib3R0b21TcGFjaW5nOiAwLFxuXG4gICAgLyoqXHJcbiAgICAgKiBDb250YWluZXIgc2lkZWJhciBzZWxlY3RvciB0byBrbm93IHdoYXQgdGhlIGJlZ2lubmluZyBhbmQgZW5kIG9mIHN0aWNreSBlbGVtZW50LlxyXG4gICAgICogQHR5cGUge1N0cmluZ3xGYWxzZX1cclxuICAgICAqL1xuICAgIGNvbnRhaW5lclNlbGVjdG9yOiBmYWxzZSxcblxuICAgIC8qKlxyXG4gICAgICogSW5uZXIgd3JhcHBlciBzZWxlY3Rvci5cclxuICAgICAqIEB0eXBlIHtTdHJpbmd9XHJcbiAgICAgKi9cbiAgICBpbm5lcldyYXBwZXJTZWxlY3RvcjogJy5pbm5lci13cmFwcGVyLXN0aWNreScsXG5cbiAgICAvKipcclxuICAgICAqIFRoZSBuYW1lIG9mIENTUyBjbGFzcyB0byBhcHBseSB0byBlbGVtZW50cyB3aGVuIHRoZXkgaGF2ZSBiZWNvbWUgc3R1Y2suXHJcbiAgICAgKiBAdHlwZSB7U3RyaW5nfEZhbHNlfVxyXG4gICAgICovXG4gICAgc3RpY2t5Q2xhc3M6ICdpcy1hZmZpeGVkJyxcblxuICAgIC8qKlxyXG4gICAgICogRGV0ZWN0IHdoZW4gc2lkZWJhciBhbmQgaXRzIGNvbnRhaW5lciBjaGFuZ2UgaGVpZ2h0IHNvIHJlLWNhbGN1bGF0ZSB0aGVpciBkaW1lbnNpb25zLlxyXG4gICAgICogQHR5cGUge0Jvb2xlYW59XHJcbiAgICAgKi9cbiAgICByZXNpemVTZW5zb3I6IHRydWUsXG5cbiAgICAvKipcclxuICAgICAqIFRoZSBzaWRlYmFyIHJldHVybnMgdG8gaXRzIG5vcm1hbCBwb3NpdGlvbiBpZiBpdHMgd2lkdGggYmVsb3cgdGhpcyB2YWx1ZS5cclxuICAgICAqIEB0eXBlIHtOdW1lcmljfVxyXG4gICAgICovXG4gICAgbWluV2lkdGg6IGZhbHNlXG4gIH07XG5cbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIC8vICMgQ2xhc3MgRGVmaW5pdGlvblxuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgLy9cbiAgLyoqXHJcbiAgICogU3RpY2t5IFNpZGViYXIgQ2xhc3MuXHJcbiAgICogQHB1YmxpY1xyXG4gICAqL1xuXG4gIHZhciBTdGlja3lTaWRlYmFyID0gZnVuY3Rpb24gKCkge1xuXG4gICAgLyoqXHJcbiAgICAgKiBTdGlja3kgU2lkZWJhciBDb25zdHJ1Y3Rvci5cclxuICAgICAqIEBjb25zdHJ1Y3RvclxyXG4gICAgICogQHBhcmFtIHtIVE1MRWxlbWVudHxTdHJpbmd9IHNpZGViYXIgLSBUaGUgc2lkZWJhciBlbGVtZW50IG9yIHNpZGViYXIgc2VsZWN0b3IuXHJcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyAtIFRoZSBvcHRpb25zIG9mIHN0aWNreSBzaWRlYmFyLlxyXG4gICAgICovXG4gICAgZnVuY3Rpb24gU3RpY2t5U2lkZWJhcihzaWRlYmFyKSB7XG4gICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgICB2YXIgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDoge307XG5cbiAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBTdGlja3lTaWRlYmFyKTtcblxuICAgICAgdGhpcy5vcHRpb25zID0gU3RpY2t5U2lkZWJhci5leHRlbmQoREVGQVVMVFMsIG9wdGlvbnMpO1xuXG4gICAgICAvLyBTaWRlYmFyIGVsZW1lbnQgcXVlcnkgaWYgdGhlcmUncyBubyBvbmUsIHRocm93IGVycm9yLlxuICAgICAgdGhpcy5zaWRlYmFyID0gJ3N0cmluZycgPT09IHR5cGVvZiBzaWRlYmFyID8gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzaWRlYmFyKSA6IHNpZGViYXI7XG4gICAgICBpZiAoJ3VuZGVmaW5lZCcgPT09IHR5cGVvZiB0aGlzLnNpZGViYXIpIHRocm93IG5ldyBFcnJvcihcIlRoZXJlIGlzIG5vIHNwZWNpZmljIHNpZGViYXIgZWxlbWVudC5cIik7XG5cbiAgICAgIHRoaXMuc2lkZWJhcklubmVyID0gZmFsc2U7XG4gICAgICB0aGlzLmNvbnRhaW5lciA9IHRoaXMuc2lkZWJhci5wYXJlbnRFbGVtZW50O1xuXG4gICAgICAvLyBDdXJyZW50IEFmZml4IFR5cGUgb2Ygc2lkZWJhciBlbGVtZW50LlxuICAgICAgdGhpcy5hZmZpeGVkVHlwZSA9ICdTVEFUSUMnO1xuICAgICAgdGhpcy5kaXJlY3Rpb24gPSAnZG93bic7XG4gICAgICB0aGlzLnN1cHBvcnQgPSB7XG4gICAgICAgIHRyYW5zZm9ybTogZmFsc2UsXG4gICAgICAgIHRyYW5zZm9ybTNkOiBmYWxzZVxuICAgICAgfTtcblxuICAgICAgdGhpcy5faW5pdGlhbGl6ZWQgPSBmYWxzZTtcbiAgICAgIHRoaXMuX3JlU3R5bGUgPSBmYWxzZTtcbiAgICAgIHRoaXMuX2JyZWFrcG9pbnQgPSBmYWxzZTtcbiAgICAgIHRoaXMuX3Jlc2l6ZUxpc3RlbmVycyA9IFtdO1xuXG4gICAgICAvLyBEaW1lbnNpb25zIG9mIHNpZGViYXIsIGNvbnRhaW5lciBhbmQgc2NyZWVuIHZpZXdwb3J0LlxuICAgICAgdGhpcy5kaW1lbnNpb25zID0ge1xuICAgICAgICB0cmFuc2xhdGVZOiAwLFxuICAgICAgICB0b3BTcGFjaW5nOiAwLFxuICAgICAgICBsYXN0VG9wU3BhY2luZzogMCxcbiAgICAgICAgYm90dG9tU3BhY2luZzogMCxcbiAgICAgICAgbGFzdEJvdHRvbVNwYWNpbmc6IDAsXG4gICAgICAgIHNpZGViYXJIZWlnaHQ6IDAsXG4gICAgICAgIHNpZGViYXJXaWR0aDogMCxcbiAgICAgICAgY29udGFpbmVyVG9wOiAwLFxuICAgICAgICBjb250YWluZXJIZWlnaHQ6IDAsXG4gICAgICAgIHZpZXdwb3J0SGVpZ2h0OiAwLFxuICAgICAgICB2aWV3cG9ydFRvcDogMCxcbiAgICAgICAgbGFzdFZpZXdwb3J0VG9wOiAwXG4gICAgICB9O1xuXG4gICAgICAvLyBCaW5kIGV2ZW50IGhhbmRsZXJzIGZvciByZWZlcmVuY2FiaWxpdHkuXG4gICAgICBbJ2hhbmRsZUV2ZW50J10uZm9yRWFjaChmdW5jdGlvbiAobWV0aG9kKSB7XG4gICAgICAgIF90aGlzW21ldGhvZF0gPSBfdGhpc1ttZXRob2RdLmJpbmQoX3RoaXMpO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIEluaXRpYWxpemUgc3RpY2t5IHNpZGViYXIgZm9yIGZpcnN0IHRpbWUuXG4gICAgICB0aGlzLmluaXRpYWxpemUoKTtcbiAgICB9XG5cbiAgICAvKipcclxuICAgICAqIEluaXRpYWxpemVzIHRoZSBzdGlja3kgc2lkZWJhciBieSBhZGRpbmcgaW5uZXIgd3JhcHBlciwgZGVmaW5lIGl0cyBjb250YWluZXIsIFxyXG4gICAgICogbWluLXdpZHRoIGJyZWFrcG9pbnQsIGNhbGN1bGF0aW5nIGRpbWVuc2lvbnMsIGFkZGluZyBoZWxwZXIgY2xhc3NlcyBhbmQgaW5saW5lIHN0eWxlLlxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xuXG5cbiAgICBfY3JlYXRlQ2xhc3MoU3RpY2t5U2lkZWJhciwgW3tcbiAgICAgIGtleTogJ2luaXRpYWxpemUnLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGluaXRpYWxpemUoKSB7XG4gICAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgICAgIHRoaXMuX3NldFN1cHBvcnRGZWF0dXJlcygpO1xuXG4gICAgICAgIC8vIEdldCBzdGlja3kgc2lkZWJhciBpbm5lciB3cmFwcGVyLCBpZiBub3QgZm91bmQsIHdpbGwgY3JlYXRlIG9uZS5cbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5pbm5lcldyYXBwZXJTZWxlY3Rvcikge1xuICAgICAgICAgIHRoaXMuc2lkZWJhcklubmVyID0gdGhpcy5zaWRlYmFyLnF1ZXJ5U2VsZWN0b3IodGhpcy5vcHRpb25zLmlubmVyV3JhcHBlclNlbGVjdG9yKTtcblxuICAgICAgICAgIGlmIChudWxsID09PSB0aGlzLnNpZGViYXJJbm5lcikgdGhpcy5zaWRlYmFySW5uZXIgPSBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghdGhpcy5zaWRlYmFySW5uZXIpIHtcbiAgICAgICAgICB2YXIgd3JhcHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgIHdyYXBwZXIuc2V0QXR0cmlidXRlKCdjbGFzcycsICdpbm5lci13cmFwcGVyLXN0aWNreScpO1xuICAgICAgICAgIHRoaXMuc2lkZWJhci5hcHBlbmRDaGlsZCh3cmFwcGVyKTtcblxuICAgICAgICAgIHdoaWxlICh0aGlzLnNpZGViYXIuZmlyc3RDaGlsZCAhPSB3cmFwcGVyKSB7XG4gICAgICAgICAgICB3cmFwcGVyLmFwcGVuZENoaWxkKHRoaXMuc2lkZWJhci5maXJzdENoaWxkKTtcbiAgICAgICAgICB9dGhpcy5zaWRlYmFySW5uZXIgPSB0aGlzLnNpZGViYXIucXVlcnlTZWxlY3RvcignLmlubmVyLXdyYXBwZXItc3RpY2t5Jyk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDb250YWluZXIgd3JhcHBlciBvZiB0aGUgc2lkZWJhci5cbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5jb250YWluZXJTZWxlY3Rvcikge1xuICAgICAgICAgIHZhciBjb250YWluZXJzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLm9wdGlvbnMuY29udGFpbmVyU2VsZWN0b3IpO1xuICAgICAgICAgIGNvbnRhaW5lcnMgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChjb250YWluZXJzKTtcblxuICAgICAgICAgIGNvbnRhaW5lcnMuZm9yRWFjaChmdW5jdGlvbiAoY29udGFpbmVyLCBpdGVtKSB7XG4gICAgICAgICAgICBpZiAoIWNvbnRhaW5lci5jb250YWlucyhfdGhpczIuc2lkZWJhcikpIHJldHVybjtcbiAgICAgICAgICAgIF90aGlzMi5jb250YWluZXIgPSBjb250YWluZXI7XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBpZiAoIWNvbnRhaW5lcnMubGVuZ3RoKSB0aHJvdyBuZXcgRXJyb3IoXCJUaGUgY29udGFpbmVyIGRvZXMgbm90IGNvbnRhaW5zIG9uIHRoZSBzaWRlYmFyLlwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIElmIHRvcC9ib3R0b20gc3BhY2luZyBpcyBub3QgZnVuY3Rpb24gcGFyc2UgdmFsdWUgdG8gaW50ZWdlci5cbiAgICAgICAgaWYgKCdmdW5jdGlvbicgIT09IHR5cGVvZiB0aGlzLm9wdGlvbnMudG9wU3BhY2luZykgdGhpcy5vcHRpb25zLnRvcFNwYWNpbmcgPSBwYXJzZUludCh0aGlzLm9wdGlvbnMudG9wU3BhY2luZykgfHwgMDtcblxuICAgICAgICBpZiAoJ2Z1bmN0aW9uJyAhPT0gdHlwZW9mIHRoaXMub3B0aW9ucy5ib3R0b21TcGFjaW5nKSB0aGlzLm9wdGlvbnMuYm90dG9tU3BhY2luZyA9IHBhcnNlSW50KHRoaXMub3B0aW9ucy5ib3R0b21TcGFjaW5nKSB8fCAwO1xuXG4gICAgICAgIC8vIEJyZWFrZG93biBzdGlja3kgc2lkZWJhciBpZiBzY3JlZW4gd2lkdGggYmVsb3cgYG9wdGlvbnMubWluV2lkdGhgLlxuICAgICAgICB0aGlzLl93aWR0aEJyZWFrcG9pbnQoKTtcblxuICAgICAgICAvLyBDYWxjdWxhdGUgZGltZW5zaW9ucyBvZiBzaWRlYmFyLCBjb250YWluZXIgYW5kIHZpZXdwb3J0LlxuICAgICAgICB0aGlzLmNhbGNEaW1lbnNpb25zKCk7XG5cbiAgICAgICAgLy8gQWZmaXggc2lkZWJhciBpbiBwcm9wZXIgcG9zaXRpb24uXG4gICAgICAgIHRoaXMuc3RpY2t5UG9zaXRpb24oKTtcblxuICAgICAgICAvLyBCaW5kIGFsbCBldmVudHMuXG4gICAgICAgIHRoaXMuYmluZEV2ZW50cygpO1xuXG4gICAgICAgIC8vIEluZm9ybSBvdGhlciBwcm9wZXJ0aWVzIHRoZSBzdGlja3kgc2lkZWJhciBpcyBpbml0aWFsaXplZC5cbiAgICAgICAgdGhpcy5faW5pdGlhbGl6ZWQgPSB0cnVlO1xuICAgICAgfVxuXG4gICAgICAvKipcclxuICAgICAgICogQmluZCBhbGwgZXZlbnRzIG9mIHN0aWNreSBzaWRlYmFyIHBsdWdpbi5cclxuICAgICAgICogQHByb3RlY3RlZFxyXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogJ2JpbmRFdmVudHMnLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGJpbmRFdmVudHMoKSB7XG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCB0aGlzLCB7IHBhc3NpdmU6IHRydWUsIGNhcHR1cmU6IGZhbHNlIH0pO1xuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgdGhpcywgeyBwYXNzaXZlOiB0cnVlLCBjYXB0dXJlOiBmYWxzZSB9KTtcblxuICAgICAgICB0aGlzLnNpZGViYXIuYWRkRXZlbnRMaXN0ZW5lcigndXBkYXRlJyArIEVWRU5UX0tFWSwgdGhpcyk7XG5cbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5yZXNpemVTZW5zb3IgJiYgJ3VuZGVmaW5lZCcgIT09IHR5cGVvZiBSZXNpemVTZW5zb3IpIHtcbiAgICAgICAgICBuZXcgUmVzaXplU2Vuc29yKHRoaXMuc2lkZWJhcklubmVyLCB0aGlzLmhhbmRsZUV2ZW50KTtcbiAgICAgICAgICBuZXcgUmVzaXplU2Vuc29yKHRoaXMuY29udGFpbmVyLCB0aGlzLmhhbmRsZUV2ZW50KTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvKipcclxuICAgICAgICogSGFuZGxlcyBhbGwgZXZlbnRzIG9mIHRoZSBwbHVnaW4uXHJcbiAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBldmVudCAtIEV2ZW50IG9iamVjdCBwYXNzZWQgZnJvbSBsaXN0ZW5lci5cclxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6ICdoYW5kbGVFdmVudCcsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gaGFuZGxlRXZlbnQoZXZlbnQpIHtcbiAgICAgICAgdGhpcy51cGRhdGVTdGlja3koZXZlbnQpO1xuICAgICAgfVxuXG4gICAgICAvKipcclxuICAgICAgICogQ2FsY3VsYXRlcyBkaW1lbnNpb25zIG9mIHNpZGViYXIsIGNvbnRhaW5lciBhbmQgc2NyZWVuIHZpZXdwb2ludFxyXG4gICAgICAgKiBAcHVibGljXHJcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiAnY2FsY0RpbWVuc2lvbnMnLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNhbGNEaW1lbnNpb25zKCkge1xuICAgICAgICBpZiAodGhpcy5fYnJlYWtwb2ludCkgcmV0dXJuO1xuICAgICAgICB2YXIgZGltcyA9IHRoaXMuZGltZW5zaW9ucztcblxuICAgICAgICAvLyBDb250YWluZXIgb2Ygc3RpY2t5IHNpZGViYXIgZGltZW5zaW9ucy5cbiAgICAgICAgZGltcy5jb250YWluZXJUb3AgPSBTdGlja3lTaWRlYmFyLm9mZnNldFJlbGF0aXZlKHRoaXMuY29udGFpbmVyKS50b3A7XG4gICAgICAgIGRpbXMuY29udGFpbmVySGVpZ2h0ID0gdGhpcy5jb250YWluZXIuY2xpZW50SGVpZ2h0O1xuICAgICAgICBkaW1zLmNvbnRhaW5lckJvdHRvbSA9IGRpbXMuY29udGFpbmVyVG9wICsgZGltcy5jb250YWluZXJIZWlnaHQ7XG5cbiAgICAgICAgLy8gU2lkZWJhciBkaW1lbnNpb25zLlxuICAgICAgICBkaW1zLnNpZGViYXJIZWlnaHQgPSB0aGlzLnNpZGViYXJJbm5lci5vZmZzZXRIZWlnaHQ7XG4gICAgICAgIGRpbXMuc2lkZWJhcldpZHRoID0gdGhpcy5zaWRlYmFyLm9mZnNldFdpZHRoO1xuXG4gICAgICAgIC8vIFNjcmVlbiB2aWV3cG9ydCBkaW1lbnNpb25zLlxuICAgICAgICBkaW1zLnZpZXdwb3J0SGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0O1xuXG4gICAgICAgIHRoaXMuX2NhbGNEaW1lbnNpb25zV2l0aFNjcm9sbCgpO1xuICAgICAgfVxuXG4gICAgICAvKipcclxuICAgICAgICogU29tZSBkaW1lbnNpb25zIHZhbHVlcyBuZWVkIHRvIGJlIHVwLXRvLWRhdGUgd2hlbiBzY3JvbGxpbmcgdGhlIHBhZ2UuXHJcbiAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiAnX2NhbGNEaW1lbnNpb25zV2l0aFNjcm9sbCcsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX2NhbGNEaW1lbnNpb25zV2l0aFNjcm9sbCgpIHtcbiAgICAgICAgdmFyIGRpbXMgPSB0aGlzLmRpbWVuc2lvbnM7XG5cbiAgICAgICAgZGltcy5zaWRlYmFyTGVmdCA9IFN0aWNreVNpZGViYXIub2Zmc2V0UmVsYXRpdmUodGhpcy5zaWRlYmFyKS5sZWZ0O1xuXG4gICAgICAgIGRpbXMudmlld3BvcnRUb3AgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wIHx8IGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wO1xuICAgICAgICBkaW1zLnZpZXdwb3J0Qm90dG9tID0gZGltcy52aWV3cG9ydFRvcCArIGRpbXMudmlld3BvcnRIZWlnaHQ7XG4gICAgICAgIGRpbXMudmlld3BvcnRMZWZ0ID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbExlZnQgfHwgZG9jdW1lbnQuYm9keS5zY3JvbGxMZWZ0O1xuXG4gICAgICAgIGRpbXMudG9wU3BhY2luZyA9IHRoaXMub3B0aW9ucy50b3BTcGFjaW5nO1xuICAgICAgICBkaW1zLmJvdHRvbVNwYWNpbmcgPSB0aGlzLm9wdGlvbnMuYm90dG9tU3BhY2luZztcblxuICAgICAgICBpZiAoJ2Z1bmN0aW9uJyA9PT0gdHlwZW9mIGRpbXMudG9wU3BhY2luZykgZGltcy50b3BTcGFjaW5nID0gcGFyc2VJbnQoZGltcy50b3BTcGFjaW5nKHRoaXMuc2lkZWJhcikpIHx8IDA7XG5cbiAgICAgICAgaWYgKCdmdW5jdGlvbicgPT09IHR5cGVvZiBkaW1zLmJvdHRvbVNwYWNpbmcpIGRpbXMuYm90dG9tU3BhY2luZyA9IHBhcnNlSW50KGRpbXMuYm90dG9tU3BhY2luZyh0aGlzLnNpZGViYXIpKSB8fCAwO1xuXG4gICAgICAgIGlmICgnVklFV1BPUlQtVE9QJyA9PT0gdGhpcy5hZmZpeGVkVHlwZSkge1xuICAgICAgICAgIC8vIEFkanVzdCB0cmFuc2xhdGUgWSBpbiB0aGUgY2FzZSBkZWNyZWFzZSB0b3Agc3BhY2luZyB2YWx1ZS5cbiAgICAgICAgICBpZiAoZGltcy50b3BTcGFjaW5nIDwgZGltcy5sYXN0VG9wU3BhY2luZykge1xuICAgICAgICAgICAgZGltcy50cmFuc2xhdGVZICs9IGRpbXMubGFzdFRvcFNwYWNpbmcgLSBkaW1zLnRvcFNwYWNpbmc7XG4gICAgICAgICAgICB0aGlzLl9yZVN0eWxlID0gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoJ1ZJRVdQT1JULUJPVFRPTScgPT09IHRoaXMuYWZmaXhlZFR5cGUpIHtcbiAgICAgICAgICAvLyBBZGp1c3QgdHJhbnNsYXRlIFkgaW4gdGhlIGNhc2UgZGVjcmVhc2UgYm90dG9tIHNwYWNpbmcgdmFsdWUuXG4gICAgICAgICAgaWYgKGRpbXMuYm90dG9tU3BhY2luZyA8IGRpbXMubGFzdEJvdHRvbVNwYWNpbmcpIHtcbiAgICAgICAgICAgIGRpbXMudHJhbnNsYXRlWSArPSBkaW1zLmxhc3RCb3R0b21TcGFjaW5nIC0gZGltcy5ib3R0b21TcGFjaW5nO1xuICAgICAgICAgICAgdGhpcy5fcmVTdHlsZSA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZGltcy5sYXN0VG9wU3BhY2luZyA9IGRpbXMudG9wU3BhY2luZztcbiAgICAgICAgZGltcy5sYXN0Qm90dG9tU3BhY2luZyA9IGRpbXMuYm90dG9tU3BhY2luZztcbiAgICAgIH1cblxuICAgICAgLyoqXHJcbiAgICAgICAqIERldGVybWluZSB3aGV0aGVyIHRoZSBzaWRlYmFyIGlzIGJpZ2dlciB0aGFuIHZpZXdwb3J0LlxyXG4gICAgICAgKiBAcHVibGljXHJcbiAgICAgICAqIEByZXR1cm4ge0Jvb2xlYW59XHJcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiAnaXNTaWRlYmFyRml0c1ZpZXdwb3J0JyxcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBpc1NpZGViYXJGaXRzVmlld3BvcnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRpbWVuc2lvbnMuc2lkZWJhckhlaWdodCA8IHRoaXMuZGltZW5zaW9ucy52aWV3cG9ydEhlaWdodDtcbiAgICAgIH1cblxuICAgICAgLyoqXHJcbiAgICAgICAqIE9ic2VydmUgYnJvd3NlciBzY3JvbGxpbmcgZGlyZWN0aW9uIHRvcCBhbmQgZG93bi5cclxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6ICdvYnNlcnZlU2Nyb2xsRGlyJyxcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBvYnNlcnZlU2Nyb2xsRGlyKCkge1xuICAgICAgICB2YXIgZGltcyA9IHRoaXMuZGltZW5zaW9ucztcbiAgICAgICAgaWYgKGRpbXMubGFzdFZpZXdwb3J0VG9wID09PSBkaW1zLnZpZXdwb3J0VG9wKSByZXR1cm47XG5cbiAgICAgICAgdmFyIGZ1cnRoZXN0ID0gJ2Rvd24nID09PSB0aGlzLmRpcmVjdGlvbiA/IE1hdGgubWluIDogTWF0aC5tYXg7XG5cbiAgICAgICAgLy8gSWYgdGhlIGJyb3dzZXIgaXMgc2Nyb2xsaW5nIG5vdCBpbiB0aGUgc2FtZSBkaXJlY3Rpb24uXG4gICAgICAgIGlmIChkaW1zLnZpZXdwb3J0VG9wID09PSBmdXJ0aGVzdChkaW1zLnZpZXdwb3J0VG9wLCBkaW1zLmxhc3RWaWV3cG9ydFRvcCkpIHRoaXMuZGlyZWN0aW9uID0gJ2Rvd24nID09PSB0aGlzLmRpcmVjdGlvbiA/ICd1cCcgOiAnZG93bic7XG4gICAgICB9XG5cbiAgICAgIC8qKlxyXG4gICAgICAgKiBHZXRzIGFmZml4IHR5cGUgb2Ygc2lkZWJhciBhY2NvcmRpbmcgdG8gY3VycmVudCBzY3JvbGxUb3AgYW5kIHNjcm9sbExlZnQuXHJcbiAgICAgICAqIEhvbGRzIGFsbCBsb2dpY2FsIGFmZml4IG9mIHRoZSBzaWRlYmFyIHdoZW4gc2Nyb2xsaW5nIHVwIGFuZCBkb3duIGFuZCB3aGVuIHNpZGViYXIgXHJcbiAgICAgICAqIGlzIGJpZ2dlciB0aGFuIHZpZXdwb3J0IGFuZCB2aWNlIHZlcnNhLlxyXG4gICAgICAgKiBAcHVibGljXHJcbiAgICAgICAqIEByZXR1cm4ge1N0cmluZ3xGYWxzZX0gLSBQcm9wZXIgYWZmaXggdHlwZS5cclxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6ICdnZXRBZmZpeFR5cGUnLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldEFmZml4VHlwZSgpIHtcbiAgICAgICAgdmFyIGRpbXMgPSB0aGlzLmRpbWVuc2lvbnMsXG4gICAgICAgICAgICBhZmZpeFR5cGUgPSBmYWxzZTtcblxuICAgICAgICB0aGlzLl9jYWxjRGltZW5zaW9uc1dpdGhTY3JvbGwoKTtcblxuICAgICAgICB2YXIgc2lkZWJhckJvdHRvbSA9IGRpbXMuc2lkZWJhckhlaWdodCArIGRpbXMuY29udGFpbmVyVG9wO1xuICAgICAgICB2YXIgY29sbGlkZXJUb3AgPSBkaW1zLnZpZXdwb3J0VG9wICsgZGltcy50b3BTcGFjaW5nO1xuICAgICAgICB2YXIgY29sbGlkZXJCb3R0b20gPSBkaW1zLnZpZXdwb3J0Qm90dG9tIC0gZGltcy5ib3R0b21TcGFjaW5nO1xuXG4gICAgICAgIC8vIFdoZW4gYnJvd3NlciBpcyBzY3JvbGxpbmcgdG9wLlxuICAgICAgICBpZiAoJ3VwJyA9PT0gdGhpcy5kaXJlY3Rpb24pIHtcbiAgICAgICAgICBpZiAoY29sbGlkZXJUb3AgPD0gZGltcy5jb250YWluZXJUb3ApIHtcbiAgICAgICAgICAgIGRpbXMudHJhbnNsYXRlWSA9IDA7XG4gICAgICAgICAgICBhZmZpeFR5cGUgPSAnU1RBVElDJztcbiAgICAgICAgICB9IGVsc2UgaWYgKGNvbGxpZGVyVG9wIDw9IGRpbXMudHJhbnNsYXRlWSArIGRpbXMuY29udGFpbmVyVG9wKSB7XG4gICAgICAgICAgICBkaW1zLnRyYW5zbGF0ZVkgPSBjb2xsaWRlclRvcCAtIGRpbXMuY29udGFpbmVyVG9wO1xuICAgICAgICAgICAgYWZmaXhUeXBlID0gJ1ZJRVdQT1JULVRPUCc7XG4gICAgICAgICAgfSBlbHNlIGlmICghdGhpcy5pc1NpZGViYXJGaXRzVmlld3BvcnQoKSAmJiBkaW1zLmNvbnRhaW5lclRvcCA8PSBjb2xsaWRlclRvcCkge1xuICAgICAgICAgICAgYWZmaXhUeXBlID0gJ1ZJRVdQT1JULVVOQk9UVE9NJztcbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gV2hlbiBicm93c2VyIGlzIHNjcm9sbGluZyB1cC5cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBXaGVuIHNpZGViYXIgZWxlbWVudCBpcyBub3QgYmlnZ2VyIHRoYW4gc2NyZWVuIHZpZXdwb3J0LlxuICAgICAgICAgIGlmICh0aGlzLmlzU2lkZWJhckZpdHNWaWV3cG9ydCgpKSB7XG5cbiAgICAgICAgICAgIGlmIChkaW1zLnNpZGViYXJIZWlnaHQgKyBjb2xsaWRlclRvcCA+PSBkaW1zLmNvbnRhaW5lckJvdHRvbSkge1xuICAgICAgICAgICAgICBkaW1zLnRyYW5zbGF0ZVkgPSBkaW1zLmNvbnRhaW5lckJvdHRvbSAtIHNpZGViYXJCb3R0b207XG4gICAgICAgICAgICAgIGFmZml4VHlwZSA9ICdDT05UQUlORVItQk9UVE9NJztcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoY29sbGlkZXJUb3AgPj0gZGltcy5jb250YWluZXJUb3ApIHtcbiAgICAgICAgICAgICAgZGltcy50cmFuc2xhdGVZID0gY29sbGlkZXJUb3AgLSBkaW1zLmNvbnRhaW5lclRvcDtcbiAgICAgICAgICAgICAgYWZmaXhUeXBlID0gJ1ZJRVdQT1JULVRPUCc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBXaGVuIHNpZGViYXIgZWxlbWVudCBpcyBiaWdnZXIgdGhhbiBzY3JlZW4gdmlld3BvcnQuXG4gICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgaWYgKGRpbXMuY29udGFpbmVyQm90dG9tIDw9IGNvbGxpZGVyQm90dG9tKSB7XG4gICAgICAgICAgICAgIGRpbXMudHJhbnNsYXRlWSA9IGRpbXMuY29udGFpbmVyQm90dG9tIC0gc2lkZWJhckJvdHRvbTtcbiAgICAgICAgICAgICAgYWZmaXhUeXBlID0gJ0NPTlRBSU5FUi1CT1RUT00nO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChzaWRlYmFyQm90dG9tICsgZGltcy50cmFuc2xhdGVZIDw9IGNvbGxpZGVyQm90dG9tKSB7XG4gICAgICAgICAgICAgIGRpbXMudHJhbnNsYXRlWSA9IGNvbGxpZGVyQm90dG9tIC0gc2lkZWJhckJvdHRvbTtcbiAgICAgICAgICAgICAgYWZmaXhUeXBlID0gJ1ZJRVdQT1JULUJPVFRPTSc7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRpbXMuY29udGFpbmVyVG9wICsgZGltcy50cmFuc2xhdGVZIDw9IGNvbGxpZGVyVG9wKSB7XG4gICAgICAgICAgICAgIGFmZml4VHlwZSA9ICdWSUVXUE9SVC1VTkJPVFRPTSc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gTWFrZSBzdXJlIHRoZSB0cmFuc2xhdGUgWSBpcyBub3QgYmlnZ2VyIHRoYW4gY29udGFpbmVyIGhlaWdodC5cbiAgICAgICAgZGltcy50cmFuc2xhdGVZID0gTWF0aC5tYXgoMCwgZGltcy50cmFuc2xhdGVZKTtcbiAgICAgICAgZGltcy50cmFuc2xhdGVZID0gTWF0aC5taW4oZGltcy5jb250YWluZXJIZWlnaHQsIGRpbXMudHJhbnNsYXRlWSk7XG5cbiAgICAgICAgZGltcy5sYXN0Vmlld3BvcnRUb3AgPSBkaW1zLnZpZXdwb3J0VG9wO1xuICAgICAgICByZXR1cm4gYWZmaXhUeXBlO1xuICAgICAgfVxuXG4gICAgICAvKipcclxuICAgICAgICogR2V0cyBpbmxpbmUgc3R5bGUgb2Ygc3RpY2t5IHNpZGViYXIgd3JhcHBlciBhbmQgaW5uZXIgd3JhcHBlciBhY2NvcmRpbmcgXHJcbiAgICAgICAqIHRvIGl0cyBhZmZpeCB0eXBlLlxyXG4gICAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICAgKiBAcGFyYW0ge1N0cmluZ30gYWZmaXhUeXBlIC0gQWZmaXggdHlwZSBvZiBzdGlja3kgc2lkZWJhci5cclxuICAgICAgICogQHJldHVybiB7T2JqZWN0fVxyXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogJ19nZXRTdHlsZScsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX2dldFN0eWxlKGFmZml4VHlwZSkge1xuICAgICAgICBpZiAoJ3VuZGVmaW5lZCcgPT09IHR5cGVvZiBhZmZpeFR5cGUpIHJldHVybjtcblxuICAgICAgICB2YXIgc3R5bGUgPSB7IGlubmVyOiB7fSwgb3V0ZXI6IHt9IH07XG4gICAgICAgIHZhciBkaW1zID0gdGhpcy5kaW1lbnNpb25zO1xuXG4gICAgICAgIHN3aXRjaCAoYWZmaXhUeXBlKSB7XG4gICAgICAgICAgY2FzZSAnVklFV1BPUlQtVE9QJzpcbiAgICAgICAgICAgIHN0eWxlLmlubmVyID0geyBwb3NpdGlvbjogJ2ZpeGVkJywgdG9wOiBkaW1zLnRvcFNwYWNpbmcsXG4gICAgICAgICAgICAgIGxlZnQ6IGRpbXMuc2lkZWJhckxlZnQgLSBkaW1zLnZpZXdwb3J0TGVmdCwgd2lkdGg6IGRpbXMuc2lkZWJhcldpZHRoIH07XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlICdWSUVXUE9SVC1CT1RUT00nOlxuICAgICAgICAgICAgc3R5bGUuaW5uZXIgPSB7IHBvc2l0aW9uOiAnZml4ZWQnLCB0b3A6ICdhdXRvJywgbGVmdDogZGltcy5zaWRlYmFyTGVmdCxcbiAgICAgICAgICAgICAgYm90dG9tOiBkaW1zLmJvdHRvbVNwYWNpbmcsIHdpZHRoOiBkaW1zLnNpZGViYXJXaWR0aCB9O1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSAnQ09OVEFJTkVSLUJPVFRPTSc6XG4gICAgICAgICAgY2FzZSAnVklFV1BPUlQtVU5CT1RUT00nOlxuICAgICAgICAgICAgdmFyIHRyYW5zbGF0ZSA9IHRoaXMuX2dldFRyYW5zbGF0ZSgwLCBkaW1zLnRyYW5zbGF0ZVkgKyAncHgnKTtcblxuICAgICAgICAgICAgaWYgKHRyYW5zbGF0ZSkgc3R5bGUuaW5uZXIgPSB7IHRyYW5zZm9ybTogdHJhbnNsYXRlIH07ZWxzZSBzdHlsZS5pbm5lciA9IHsgcG9zaXRpb246ICdhYnNvbHV0ZScsIHRvcDogZGltcy50cmFuc2xhdGVZLCB3aWR0aDogZGltcy5zaWRlYmFyV2lkdGggfTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG5cbiAgICAgICAgc3dpdGNoIChhZmZpeFR5cGUpIHtcbiAgICAgICAgICBjYXNlICdWSUVXUE9SVC1UT1AnOlxuICAgICAgICAgIGNhc2UgJ1ZJRVdQT1JULUJPVFRPTSc6XG4gICAgICAgICAgY2FzZSAnVklFV1BPUlQtVU5CT1RUT00nOlxuICAgICAgICAgIGNhc2UgJ0NPTlRBSU5FUi1CT1RUT00nOlxuICAgICAgICAgICAgc3R5bGUub3V0ZXIgPSB7IGhlaWdodDogZGltcy5zaWRlYmFySGVpZ2h0LCBwb3NpdGlvbjogJ3JlbGF0aXZlJyB9O1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cblxuICAgICAgICBzdHlsZS5vdXRlciA9IFN0aWNreVNpZGViYXIuZXh0ZW5kKHsgaGVpZ2h0OiAnJywgcG9zaXRpb246ICcnIH0sIHN0eWxlLm91dGVyKTtcbiAgICAgICAgc3R5bGUuaW5uZXIgPSBTdGlja3lTaWRlYmFyLmV4dGVuZCh7IHBvc2l0aW9uOiAncmVsYXRpdmUnLCB0b3A6ICcnLCBsZWZ0OiAnJyxcbiAgICAgICAgICBib3R0b206ICcnLCB3aWR0aDogJycsIHRyYW5zZm9ybTogdGhpcy5fZ2V0VHJhbnNsYXRlKCkgfSwgc3R5bGUuaW5uZXIpO1xuXG4gICAgICAgIHJldHVybiBzdHlsZTtcbiAgICAgIH1cblxuICAgICAgLyoqXHJcbiAgICAgICAqIENhdXNlIHRoZSBzaWRlYmFyIHRvIGJlIHN0aWNreSBhY2NvcmRpbmcgdG8gYWZmaXggdHlwZSBieSBhZGRpbmcgaW5saW5lXHJcbiAgICAgICAqIHN0eWxlLCBhZGRpbmcgaGVscGVyIGNsYXNzIGFuZCB0cmlnZ2VyIGV2ZW50cy5cclxuICAgICAgICogQGZ1bmN0aW9uXHJcbiAgICAgICAqIEBwcm90ZWN0ZWRcclxuICAgICAgICogQHBhcmFtIHtzdHJpbmd9IGZvcmNlIC0gVXBkYXRlIHN0aWNreSBzaWRlYmFyIHBvc2l0aW9uIGJ5IGZvcmNlLlxyXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogJ3N0aWNreVBvc2l0aW9uJyxcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBzdGlja3lQb3NpdGlvbihmb3JjZSkge1xuICAgICAgICBpZiAodGhpcy5fYnJlYWtwb2ludCkgcmV0dXJuO1xuXG4gICAgICAgIGZvcmNlID0gdGhpcy5fcmVTdHlsZSB8fCBmb3JjZSB8fCBmYWxzZTtcblxuICAgICAgICB2YXIgYWZmaXhUeXBlID0gdGhpcy5nZXRBZmZpeFR5cGUoKTtcbiAgICAgICAgdmFyIHN0eWxlID0gdGhpcy5fZ2V0U3R5bGUoYWZmaXhUeXBlKTtcblxuICAgICAgICBpZiAoKHRoaXMuYWZmaXhlZFR5cGUgIT0gYWZmaXhUeXBlIHx8IGZvcmNlKSAmJiBhZmZpeFR5cGUpIHtcbiAgICAgICAgICB2YXIgYWZmaXhFdmVudCA9ICdhZmZpeC4nICsgYWZmaXhUeXBlLnRvTG93ZXJDYXNlKCkucmVwbGFjZSgndmlld3BvcnQtJywgJycpICsgRVZFTlRfS0VZO1xuICAgICAgICAgIFN0aWNreVNpZGViYXIuZXZlbnRUcmlnZ2VyKHRoaXMuc2lkZWJhciwgYWZmaXhFdmVudCk7XG5cbiAgICAgICAgICBpZiAoJ1NUQVRJQycgPT09IGFmZml4VHlwZSkgU3RpY2t5U2lkZWJhci5yZW1vdmVDbGFzcyh0aGlzLnNpZGViYXIsIHRoaXMub3B0aW9ucy5zdGlja3lDbGFzcyk7ZWxzZSBTdGlja3lTaWRlYmFyLmFkZENsYXNzKHRoaXMuc2lkZWJhciwgdGhpcy5vcHRpb25zLnN0aWNreUNsYXNzKTtcblxuICAgICAgICAgIGZvciAodmFyIGtleSBpbiBzdHlsZS5vdXRlcikge1xuICAgICAgICAgICAgdGhpcy5zaWRlYmFyLnN0eWxlW2tleV0gPSBzdHlsZS5vdXRlcltrZXldO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGZvciAodmFyIF9rZXkgaW4gc3R5bGUuaW5uZXIpIHtcbiAgICAgICAgICAgIHZhciBfdW5pdDIgPSAnbnVtYmVyJyA9PT0gdHlwZW9mIHN0eWxlLmlubmVyW19rZXldID8gJ3B4JyA6ICcnO1xuICAgICAgICAgICAgdGhpcy5zaWRlYmFySW5uZXIuc3R5bGVbX2tleV0gPSBzdHlsZS5pbm5lcltfa2V5XSArIF91bml0MjtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICB2YXIgYWZmaXhlZEV2ZW50ID0gJ2FmZml4ZWQuJyArIGFmZml4VHlwZS50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoJ3ZpZXdwb3J0LScsICcnKSArIEVWRU5UX0tFWTtcbiAgICAgICAgICBTdGlja3lTaWRlYmFyLmV2ZW50VHJpZ2dlcih0aGlzLnNpZGViYXIsIGFmZml4ZWRFdmVudCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKHRoaXMuX2luaXRpYWxpemVkKSB0aGlzLnNpZGViYXJJbm5lci5zdHlsZS5sZWZ0ID0gc3R5bGUuaW5uZXIubGVmdDtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuYWZmaXhlZFR5cGUgPSBhZmZpeFR5cGU7XG4gICAgICB9XG5cbiAgICAgIC8qKlxyXG4gICAgICAgKiBCcmVha2Rvd24gc3RpY2t5IHNpZGViYXIgd2hlbiB3aW5kb3cgd2lkdGggaXMgYmVsb3cgYG9wdGlvbnMubWluV2lkdGhgIHZhbHVlLlxyXG4gICAgICAgKiBAcHJvdGVjdGVkXHJcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiAnX3dpZHRoQnJlYWtwb2ludCcsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX3dpZHRoQnJlYWtwb2ludCgpIHtcblxuICAgICAgICBpZiAod2luZG93LmlubmVyV2lkdGggPD0gdGhpcy5vcHRpb25zLm1pbldpZHRoKSB7XG4gICAgICAgICAgdGhpcy5fYnJlYWtwb2ludCA9IHRydWU7XG4gICAgICAgICAgdGhpcy5hZmZpeGVkVHlwZSA9ICdTVEFUSUMnO1xuXG4gICAgICAgICAgdGhpcy5zaWRlYmFyLnJlbW92ZUF0dHJpYnV0ZSgnc3R5bGUnKTtcbiAgICAgICAgICBTdGlja3lTaWRlYmFyLnJlbW92ZUNsYXNzKHRoaXMuc2lkZWJhciwgdGhpcy5vcHRpb25zLnN0aWNreUNsYXNzKTtcbiAgICAgICAgICB0aGlzLnNpZGViYXJJbm5lci5yZW1vdmVBdHRyaWJ1dGUoJ3N0eWxlJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5fYnJlYWtwb2ludCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8qKlxyXG4gICAgICAgKiBTd2l0Y2hlcyBiZXR3ZWVuIGZ1bmN0aW9ucyBzdGFjayBmb3IgZWFjaCBldmVudCB0eXBlLCBpZiB0aGVyZSdzIG5vIFxyXG4gICAgICAgKiBldmVudCwgaXQgd2lsbCByZS1pbml0aWFsaXplIHN0aWNreSBzaWRlYmFyLlxyXG4gICAgICAgKiBAcHVibGljXHJcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiAndXBkYXRlU3RpY2t5JyxcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiB1cGRhdGVTdGlja3koKSB7XG4gICAgICAgIHZhciBfdGhpczMgPSB0aGlzO1xuXG4gICAgICAgIHZhciBldmVudCA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge307XG5cbiAgICAgICAgaWYgKHRoaXMuX3J1bm5pbmcpIHJldHVybjtcbiAgICAgICAgdGhpcy5fcnVubmluZyA9IHRydWU7XG5cbiAgICAgICAgKGZ1bmN0aW9uIChldmVudFR5cGUpIHtcblxuICAgICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKGV2ZW50VHlwZSkge1xuICAgICAgICAgICAgICAvLyBXaGVuIGJyb3dzZXIgaXMgc2Nyb2xsaW5nIGFuZCByZS1jYWxjdWxhdGUganVzdCBkaW1lbnNpb25zXG4gICAgICAgICAgICAgIC8vIHdpdGhpbiBzY3JvbGwuIFxuICAgICAgICAgICAgICBjYXNlICdzY3JvbGwnOlxuICAgICAgICAgICAgICAgIF90aGlzMy5fY2FsY0RpbWVuc2lvbnNXaXRoU2Nyb2xsKCk7XG4gICAgICAgICAgICAgICAgX3RoaXMzLm9ic2VydmVTY3JvbGxEaXIoKTtcbiAgICAgICAgICAgICAgICBfdGhpczMuc3RpY2t5UG9zaXRpb24oKTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAvLyBXaGVuIGJyb3dzZXIgaXMgcmVzaXppbmcgb3IgdGhlcmUncyBubyBldmVudCwgb2JzZXJ2ZSB3aWR0aFxuICAgICAgICAgICAgICAvLyBicmVha3BvaW50IGFuZCByZS1jYWxjdWxhdGUgZGltZW5zaW9ucy5cbiAgICAgICAgICAgICAgY2FzZSAncmVzaXplJzpcbiAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICBfdGhpczMuX3dpZHRoQnJlYWtwb2ludCgpO1xuICAgICAgICAgICAgICAgIF90aGlzMy5jYWxjRGltZW5zaW9ucygpO1xuICAgICAgICAgICAgICAgIF90aGlzMy5zdGlja3lQb3NpdGlvbih0cnVlKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIF90aGlzMy5fcnVubmluZyA9IGZhbHNlO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KShldmVudC50eXBlKTtcbiAgICAgIH1cblxuICAgICAgLyoqXHJcbiAgICAgICAqIFNldCBicm93c2VyIHN1cHBvcnQgZmVhdHVyZXMgdG8gdGhlIHB1YmxpYyBwcm9wZXJ0eS5cclxuICAgICAgICogQHByaXZhdGVcclxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6ICdfc2V0U3VwcG9ydEZlYXR1cmVzJyxcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfc2V0U3VwcG9ydEZlYXR1cmVzKCkge1xuICAgICAgICB2YXIgc3VwcG9ydCA9IHRoaXMuc3VwcG9ydDtcblxuICAgICAgICBzdXBwb3J0LnRyYW5zZm9ybSA9IFN0aWNreVNpZGViYXIuc3VwcG9ydFRyYW5zZm9ybSgpO1xuICAgICAgICBzdXBwb3J0LnRyYW5zZm9ybTNkID0gU3RpY2t5U2lkZWJhci5zdXBwb3J0VHJhbnNmb3JtKHRydWUpO1xuICAgICAgfVxuXG4gICAgICAvKipcclxuICAgICAgICogR2V0IHRyYW5zbGF0ZSB2YWx1ZSwgaWYgdGhlIGJyb3dzZXIgc3VwcG9ydHMgdHJhbnNmcm9tM2QsIGl0IHdpbGwgYWRvcHQgaXQuXHJcbiAgICAgICAqIGFuZCB0aGUgc2FtZSB3aXRoIHRyYW5zbGF0ZS4gaWYgYnJvd3NlciBkb2Vzbid0IHN1cHBvcnQgYm90aCByZXR1cm4gZmFsc2UuXHJcbiAgICAgICAqIEBwYXJhbSB7TnVtYmVyfSB5IC0gVmFsdWUgb2YgWS1heGlzLlxyXG4gICAgICAgKiBAcGFyYW0ge051bWJlcn0geCAtIFZhbHVlIG9mIFgtYXhpcy5cclxuICAgICAgICogQHBhcmFtIHtOdW1iZXJ9IHogLSBWYWx1ZSBvZiBaLWF4aXMuXHJcbiAgICAgICAqIEByZXR1cm4ge1N0cmluZ3xGYWxzZX1cclxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6ICdfZ2V0VHJhbnNsYXRlJyxcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfZ2V0VHJhbnNsYXRlKCkge1xuICAgICAgICB2YXIgeSA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogMDtcbiAgICAgICAgdmFyIHggPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IDA7XG4gICAgICAgIHZhciB6ID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiAwO1xuXG4gICAgICAgIGlmICh0aGlzLnN1cHBvcnQudHJhbnNmb3JtM2QpIHJldHVybiAndHJhbnNsYXRlM2QoJyArIHkgKyAnLCAnICsgeCArICcsICcgKyB6ICsgJyknO2Vsc2UgaWYgKHRoaXMuc3VwcG9ydC50cmFuc2xhdGUpIHJldHVybiAndHJhbnNsYXRlKCcgKyB5ICsgJywgJyArIHggKyAnKSc7ZWxzZSByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIC8qKlxyXG4gICAgICAgKiBEZXN0cm95IHN0aWNreSBzaWRlYmFyIHBsdWdpbi5cclxuICAgICAgICogQHB1YmxpY1xyXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogJ2Rlc3Ryb3knLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGRlc3Ryb3koKSB7XG4gICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdyZXNpemUnLCB0aGlzLCB7IGNhcHRpb246IGZhbHNlIH0pO1xuICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgdGhpcywgeyBjYXB0aW9uOiBmYWxzZSB9KTtcblxuICAgICAgICB0aGlzLnNpZGViYXIuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLm9wdGlvbnMuc3RpY2t5Q2xhc3MpO1xuICAgICAgICB0aGlzLnNpZGViYXIuc3R5bGUubWluSGVpZ2h0ID0gJyc7XG5cbiAgICAgICAgdGhpcy5zaWRlYmFyLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3VwZGF0ZScgKyBFVkVOVF9LRVksIHRoaXMpO1xuXG4gICAgICAgIHZhciBzdHlsZVJlc2V0ID0geyBpbm5lcjoge30sIG91dGVyOiB7fSB9O1xuXG4gICAgICAgIHN0eWxlUmVzZXQuaW5uZXIgPSB7IHBvc2l0aW9uOiAnJywgdG9wOiAnJywgbGVmdDogJycsIGJvdHRvbTogJycsIHdpZHRoOiAnJywgdHJhbnNmb3JtOiAnJyB9O1xuICAgICAgICBzdHlsZVJlc2V0Lm91dGVyID0geyBoZWlnaHQ6ICcnLCBwb3NpdGlvbjogJycgfTtcblxuICAgICAgICBmb3IgKHZhciBrZXkgaW4gc3R5bGVSZXNldC5vdXRlcikge1xuICAgICAgICAgIHRoaXMuc2lkZWJhci5zdHlsZVtrZXldID0gc3R5bGVSZXNldC5vdXRlcltrZXldO1xuICAgICAgICB9Zm9yICh2YXIgX2tleTIgaW4gc3R5bGVSZXNldC5pbm5lcikge1xuICAgICAgICAgIHRoaXMuc2lkZWJhcklubmVyLnN0eWxlW19rZXkyXSA9IHN0eWxlUmVzZXQuaW5uZXJbX2tleTJdO1xuICAgICAgICB9aWYgKHRoaXMub3B0aW9ucy5yZXNpemVTZW5zb3IgJiYgJ3VuZGVmaW5lZCcgIT09IHR5cGVvZiBSZXNpemVTZW5zb3IpIHtcbiAgICAgICAgICBSZXNpemVTZW5zb3IuZGV0YWNoKHRoaXMuc2lkZWJhcklubmVyLCB0aGlzLmhhbmRsZUV2ZW50KTtcbiAgICAgICAgICBSZXNpemVTZW5zb3IuZGV0YWNoKHRoaXMuY29udGFpbmVyLCB0aGlzLmhhbmRsZUV2ZW50KTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvKipcclxuICAgICAgICogRGV0ZXJtaW5lIGlmIHRoZSBicm93c2VyIHN1cHBvcnRzIENTUyB0cmFuc2Zvcm0gZmVhdHVyZS5cclxuICAgICAgICogQGZ1bmN0aW9uXHJcbiAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICogQHBhcmFtIHtCb29sZWFufSB0cmFuc2Zvcm0zZCAtIERldGVjdCB0cmFuc2Zvcm0gd2l0aCB0cmFuc2xhdGUzZC5cclxuICAgICAgICogQHJldHVybiB7U3RyaW5nfVxyXG4gICAgICAgKi9cblxuICAgIH1dLCBbe1xuICAgICAga2V5OiAnc3VwcG9ydFRyYW5zZm9ybScsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gc3VwcG9ydFRyYW5zZm9ybSh0cmFuc2Zvcm0zZCkge1xuICAgICAgICB2YXIgcmVzdWx0ID0gZmFsc2UsXG4gICAgICAgICAgICBwcm9wZXJ0eSA9IHRyYW5zZm9ybTNkID8gJ3BlcnNwZWN0aXZlJyA6ICd0cmFuc2Zvcm0nLFxuICAgICAgICAgICAgdXBwZXIgPSBwcm9wZXJ0eS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHByb3BlcnR5LnNsaWNlKDEpLFxuICAgICAgICAgICAgcHJlZml4ZXMgPSBbJ1dlYmtpdCcsICdNb3onLCAnTycsICdtcyddLFxuICAgICAgICAgICAgc3VwcG9ydCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N1cHBvcnQnKSxcbiAgICAgICAgICAgIHN0eWxlID0gc3VwcG9ydC5zdHlsZTtcblxuICAgICAgICAocHJvcGVydHkgKyAnICcgKyBwcmVmaXhlcy5qb2luKHVwcGVyICsgJyAnKSArIHVwcGVyKS5zcGxpdCgnICcpLmZvckVhY2goZnVuY3Rpb24gKHByb3BlcnR5LCBpKSB7XG4gICAgICAgICAgaWYgKHN0eWxlW3Byb3BlcnR5XSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXN1bHQgPSBwcm9wZXJ0eTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfVxuXG4gICAgICAvKipcclxuICAgICAgICogVHJpZ2dlciBjdXN0b20gZXZlbnQuXHJcbiAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICogQHBhcmFtIHtET01PYmplY3R9IGVsZW1lbnQgLSBUYXJnZXQgZWxlbWVudCBvbiB0aGUgRE9NLlxyXG4gICAgICAgKiBAcGFyYW0ge1N0cmluZ30gZXZlbnROYW1lIC0gRXZlbnQgbmFtZS5cclxuICAgICAgICogQHBhcmFtIHtPYmplY3R9IGRhdGEgLSBcclxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6ICdldmVudFRyaWdnZXInLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGV2ZW50VHJpZ2dlcihlbGVtZW50LCBldmVudE5hbWUsIGRhdGEpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICB2YXIgZXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoZXZlbnROYW1lLCB7IGRldGFpbDogZGF0YSB9KTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIHZhciBldmVudCA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KCdDdXN0b21FdmVudCcpO1xuICAgICAgICAgIGV2ZW50LmluaXRDdXN0b21FdmVudChldmVudE5hbWUsIHRydWUsIHRydWUsIGRhdGEpO1xuICAgICAgICB9XG4gICAgICAgIGVsZW1lbnQuZGlzcGF0Y2hFdmVudChldmVudCk7XG4gICAgICB9XG5cbiAgICAgIC8qKlxyXG4gICAgICAgKiBFeHRlbmQgb3B0aW9ucyBvYmplY3Qgd2l0aCBkZWZhdWx0cy5cclxuICAgICAgICogQGZ1bmN0aW9uXHJcbiAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6ICdleHRlbmQnLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGV4dGVuZChkZWZhdWx0cywgb3B0aW9ucykge1xuICAgICAgICB2YXIgcmVzdWx0cyA9IHt9O1xuICAgICAgICBmb3IgKHZhciBrZXkgaW4gZGVmYXVsdHMpIHtcbiAgICAgICAgICBpZiAoJ3VuZGVmaW5lZCcgIT09IHR5cGVvZiBvcHRpb25zW2tleV0pIHJlc3VsdHNba2V5XSA9IG9wdGlvbnNba2V5XTtlbHNlIHJlc3VsdHNba2V5XSA9IGRlZmF1bHRzW2tleV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdHM7XG4gICAgICB9XG5cbiAgICAgIC8qKlxyXG4gICAgICAgKiBHZXQgY3VycmVudCBjb29yZGluYXRlcyBsZWZ0IGFuZCB0b3Agb2Ygc3BlY2lmaWMgZWxlbWVudC5cclxuICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogJ29mZnNldFJlbGF0aXZlJyxcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBvZmZzZXRSZWxhdGl2ZShlbGVtZW50KSB7XG4gICAgICAgIHZhciByZXN1bHQgPSB7IGxlZnQ6IDAsIHRvcDogMCB9O1xuXG4gICAgICAgIGRvIHtcbiAgICAgICAgICB2YXIgb2Zmc2V0VG9wID0gZWxlbWVudC5vZmZzZXRUb3A7XG4gICAgICAgICAgdmFyIG9mZnNldExlZnQgPSBlbGVtZW50Lm9mZnNldExlZnQ7XG5cbiAgICAgICAgICBpZiAoIWlzTmFOKG9mZnNldFRvcCkpIHJlc3VsdC50b3AgKz0gb2Zmc2V0VG9wO1xuXG4gICAgICAgICAgaWYgKCFpc05hTihvZmZzZXRMZWZ0KSkgcmVzdWx0LmxlZnQgKz0gb2Zmc2V0TGVmdDtcblxuICAgICAgICAgIGVsZW1lbnQgPSAnQk9EWScgPT09IGVsZW1lbnQudGFnTmFtZSA/IGVsZW1lbnQucGFyZW50RWxlbWVudCA6IGVsZW1lbnQub2Zmc2V0UGFyZW50O1xuICAgICAgICB9IHdoaWxlIChlbGVtZW50KTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH1cblxuICAgICAgLyoqXHJcbiAgICAgICAqIEFkZCBzcGVjaWZpYyBjbGFzcyBuYW1lIHRvIHNwZWNpZmljIGVsZW1lbnQuXHJcbiAgICAgICAqIEBzdGF0aWMgXHJcbiAgICAgICAqIEBwYXJhbSB7T2JqZWN0RE9NfSBlbGVtZW50IFxyXG4gICAgICAgKiBAcGFyYW0ge1N0cmluZ30gY2xhc3NOYW1lIFxyXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogJ2FkZENsYXNzJyxcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBhZGRDbGFzcyhlbGVtZW50LCBjbGFzc05hbWUpIHtcbiAgICAgICAgaWYgKCFTdGlja3lTaWRlYmFyLmhhc0NsYXNzKGVsZW1lbnQsIGNsYXNzTmFtZSkpIHtcbiAgICAgICAgICBpZiAoZWxlbWVudC5jbGFzc0xpc3QpIGVsZW1lbnQuY2xhc3NMaXN0LmFkZChjbGFzc05hbWUpO2Vsc2UgZWxlbWVudC5jbGFzc05hbWUgKz0gJyAnICsgY2xhc3NOYW1lO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8qKlxyXG4gICAgICAgKiBSZW1vdmUgc3BlY2lmaWMgY2xhc3MgbmFtZSB0byBzcGVjaWZpYyBlbGVtZW50XHJcbiAgICAgICAqIEBzdGF0aWNcclxuICAgICAgICogQHBhcmFtIHtPYmplY3RET019IGVsZW1lbnQgXHJcbiAgICAgICAqIEBwYXJhbSB7U3RyaW5nfSBjbGFzc05hbWUgXHJcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiAncmVtb3ZlQ2xhc3MnLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbW92ZUNsYXNzKGVsZW1lbnQsIGNsYXNzTmFtZSkge1xuICAgICAgICBpZiAoU3RpY2t5U2lkZWJhci5oYXNDbGFzcyhlbGVtZW50LCBjbGFzc05hbWUpKSB7XG4gICAgICAgICAgaWYgKGVsZW1lbnQuY2xhc3NMaXN0KSBlbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoY2xhc3NOYW1lKTtlbHNlIGVsZW1lbnQuY2xhc3NOYW1lID0gZWxlbWVudC5jbGFzc05hbWUucmVwbGFjZShuZXcgUmVnRXhwKCcoXnxcXFxcYiknICsgY2xhc3NOYW1lLnNwbGl0KCcgJykuam9pbignfCcpICsgJyhcXFxcYnwkKScsICdnaScpLCAnICcpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8qKlxyXG4gICAgICAgKiBEZXRlcm1pbmUgd2VhdGhlciB0aGUgZWxlbWVudCBoYXMgc3BlY2lmaWMgY2xhc3MgbmFtZS5cclxuICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgKiBAcGFyYW0ge09iamVjdERPTX0gZWxlbWVudCBcclxuICAgICAgICogQHBhcmFtIHtTdHJpbmd9IGNsYXNzTmFtZSBcclxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6ICdoYXNDbGFzcycsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gaGFzQ2xhc3MoZWxlbWVudCwgY2xhc3NOYW1lKSB7XG4gICAgICAgIGlmIChlbGVtZW50LmNsYXNzTGlzdCkgcmV0dXJuIGVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKGNsYXNzTmFtZSk7ZWxzZSByZXR1cm4gbmV3IFJlZ0V4cCgnKF58ICknICsgY2xhc3NOYW1lICsgJyggfCQpJywgJ2dpJykudGVzdChlbGVtZW50LmNsYXNzTmFtZSk7XG4gICAgICB9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIFN0aWNreVNpZGViYXI7XG4gIH0oKTtcblxuICByZXR1cm4gU3RpY2t5U2lkZWJhcjtcbn0oKTtcblxuLy8gR2xvYmFsXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG53aW5kb3cuU3RpY2t5U2lkZWJhciA9IFN0aWNreVNpZGViYXI7XG5cbihmdW5jdGlvbiAoKSB7XG4gIGlmICgndW5kZWZpbmVkJyA9PT0gdHlwZW9mIHdpbmRvdykgcmV0dXJuO1xuXG4gIHZhciBwbHVnaW4gPSB3aW5kb3cuJCB8fCB3aW5kb3cualF1ZXJ5IHx8IHdpbmRvdy5aZXB0bztcbiAgdmFyIERBVEFfTkFNRVNQQUNFID0gJ3N0aWNreVNpZGViYXInO1xuXG4gIC8vIE1ha2Ugc3VyZSB0aGUgc2l0ZSBoYXMganF1ZXJ5IG9yIHplcHRvIHBsdWdpbi5cbiAgaWYgKHBsdWdpbikge1xuICAgIC8qKlxyXG4gICAgICogU3RpY2t5IFNpZGViYXIgUGx1Z2luIERlZmludGlvbi5cclxuICAgICAqIEBwYXJhbSB7T2JqZWN0fFN0cmluZ30gLSBjb25maWdcclxuICAgICAqL1xuICAgIHZhciBfalF1ZXJ5UGx1Z2luID0gZnVuY3Rpb24gKGNvbmZpZykge1xuICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciAkdGhpcyA9IHBsdWdpbih0aGlzKSxcbiAgICAgICAgICAgIGRhdGEgPSBwbHVnaW4odGhpcykuZGF0YShEQVRBX05BTUVTUEFDRSk7XG5cbiAgICAgICAgaWYgKCFkYXRhKSB7XG4gICAgICAgICAgZGF0YSA9IG5ldyBTdGlja3lTaWRlYmFyKHRoaXMsIHR5cGVvZiBjb25maWcgPT0gJ29iamVjdCcgJiYgY29uZmlnKTtcbiAgICAgICAgICAkdGhpcy5kYXRhKERBVEFfTkFNRVNQQUNFLCBkYXRhKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICgnc3RyaW5nJyA9PT0gdHlwZW9mIGNvbmZpZykge1xuICAgICAgICAgIGlmIChkYXRhW2NvbmZpZ10gPT09IHVuZGVmaW5lZCAmJiBbJ2Rlc3Ryb3knLCAndXBkYXRlU3RpY2t5J10uaW5kZXhPZihjb25maWcpID09PSAtMSkgdGhyb3cgbmV3IEVycm9yKCdObyBtZXRob2QgbmFtZWQgXCInICsgY29uZmlnICsgJ1wiJyk7XG5cbiAgICAgICAgICBkYXRhW2NvbmZpZ10oKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfTtcblxuICAgIHBsdWdpbi5mbi5zdGlja3lTaWRlYmFyID0gX2pRdWVyeVBsdWdpbjtcbiAgICBwbHVnaW4uZm4uc3RpY2t5U2lkZWJhci5Db25zdHJ1Y3RvciA9IFN0aWNreVNpZGViYXI7XG5cbiAgICB2YXIgb2xkID0gcGx1Z2luLmZuLnN0aWNreVNpZGViYXI7XG5cbiAgICAvKipcclxuICAgICAqIFN0aWNreSBTaWRlYmFyIE5vIENvbmZsaWN0LlxyXG4gICAgICovXG4gICAgcGx1Z2luLmZuLnN0aWNreVNpZGViYXIubm9Db25mbGljdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHBsdWdpbi5mbi5zdGlja3lTaWRlYmFyID0gb2xkO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgfVxufSkoKTtcblxufSkpKTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9anF1ZXJ5LnN0aWNreS1zaWRlYmFyLmpzLm1hcFxuIl19
