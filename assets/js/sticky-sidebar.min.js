!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e():"function"==typeof define&&define.amd?define(e):e()}(0,(function(){"use strict";var t=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}
/**
 * Sticky Sidebar JavaScript Plugin.
 * @version 3.3.1
 * @author Ahmed Bouhuolia <a.bouhuolia@gmail.com>
 * @license The MIT License (MIT)
 */var i,n,s=(i=".stickySidebar",n={topSpacing:0,bottomSpacing:0,containerSelector:!1,innerWrapperSelector:".inner-wrapper-sticky",stickyClass:"is-affixed",resizeSensor:!0,minWidth:!1},function(){function s(t){var i=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e(this,s),this.options=s.extend(n,o),this.sidebar="string"==typeof t?document.querySelector(t):t,void 0===this.sidebar)throw new Error("There is no specific sidebar element.");this.sidebarInner=!1,this.container=this.sidebar.parentElement,this.affixedType="STATIC",this.direction="down",this.support={transform:!1,transform3d:!1},this._initialized=!1,this._reStyle=!1,this._breakpoint=!1,this._resizeListeners=[],this.dimensions={translateY:0,topSpacing:0,lastTopSpacing:0,bottomSpacing:0,lastBottomSpacing:0,sidebarHeight:0,sidebarWidth:0,containerTop:0,containerHeight:0,viewportHeight:0,viewportTop:0,lastViewportTop:0},["handleEvent"].forEach((function(t){i[t]=i[t].bind(i)})),this.initialize()}return t(s,[{key:"initialize",value:function(){var t=this;if(this._setSupportFeatures(),this.options.innerWrapperSelector&&(this.sidebarInner=this.sidebar.querySelector(this.options.innerWrapperSelector),null===this.sidebarInner&&(this.sidebarInner=!1)),!this.sidebarInner){var e=document.createElement("div");for(e.setAttribute("class","inner-wrapper-sticky"),this.sidebar.appendChild(e);this.sidebar.firstChild!=e;)e.appendChild(this.sidebar.firstChild);this.sidebarInner=this.sidebar.querySelector(".inner-wrapper-sticky")}if(this.options.containerSelector){var i=document.querySelectorAll(this.options.containerSelector);if((i=Array.prototype.slice.call(i)).forEach((function(e,i){e.contains(t.sidebar)&&(t.container=e)})),!i.length)throw new Error("The container does not contains on the sidebar.")}"function"!=typeof this.options.topSpacing&&(this.options.topSpacing=parseInt(this.options.topSpacing)||0),"function"!=typeof this.options.bottomSpacing&&(this.options.bottomSpacing=parseInt(this.options.bottomSpacing)||0),this._widthBreakpoint(),this.calcDimensions(),this.stickyPosition(),this.bindEvents(),this._initialized=!0}},{key:"bindEvents",value:function(){window.addEventListener("resize",this,{passive:!0,capture:!1}),window.addEventListener("scroll",this,{passive:!0,capture:!1}),this.sidebar.addEventListener("update"+i,this),this.options.resizeSensor&&"undefined"!=typeof ResizeSensor&&(new ResizeSensor(this.sidebarInner,this.handleEvent),new ResizeSensor(this.container,this.handleEvent))}},{key:"handleEvent",value:function(t){this.updateSticky(t)}},{key:"calcDimensions",value:function(){if(!this._breakpoint){var t=this.dimensions;t.containerTop=s.offsetRelative(this.container).top,t.containerHeight=this.container.clientHeight,t.containerBottom=t.containerTop+t.containerHeight,t.sidebarHeight=this.sidebarInner.offsetHeight,t.sidebarWidth=this.sidebar.offsetWidth,t.viewportHeight=window.innerHeight,this._calcDimensionsWithScroll()}}},{key:"_calcDimensionsWithScroll",value:function(){var t=this.dimensions;t.sidebarLeft=s.offsetRelative(this.sidebar).left,t.viewportTop=document.documentElement.scrollTop||document.body.scrollTop,t.viewportBottom=t.viewportTop+t.viewportHeight,t.viewportLeft=document.documentElement.scrollLeft||document.body.scrollLeft,t.topSpacing=this.options.topSpacing,t.bottomSpacing=this.options.bottomSpacing,"function"==typeof t.topSpacing&&(t.topSpacing=parseInt(t.topSpacing(this.sidebar))||0),"function"==typeof t.bottomSpacing&&(t.bottomSpacing=parseInt(t.bottomSpacing(this.sidebar))||0),"VIEWPORT-TOP"===this.affixedType?t.topSpacing<t.lastTopSpacing&&(t.translateY+=t.lastTopSpacing-t.topSpacing,this._reStyle=!0):"VIEWPORT-BOTTOM"===this.affixedType&&t.bottomSpacing<t.lastBottomSpacing&&(t.translateY+=t.lastBottomSpacing-t.bottomSpacing,this._reStyle=!0),t.lastTopSpacing=t.topSpacing,t.lastBottomSpacing=t.bottomSpacing}},{key:"isSidebarFitsViewport",value:function(){return this.dimensions.sidebarHeight<this.dimensions.viewportHeight}},{key:"observeScrollDir",value:function(){var t=this.dimensions;if(t.lastViewportTop!==t.viewportTop){var e="down"===this.direction?Math.min:Math.max;t.viewportTop===e(t.viewportTop,t.lastViewportTop)&&(this.direction="down"===this.direction?"up":"down")}}},{key:"getAffixType",value:function(){var t=this.dimensions,e=!1;this._calcDimensionsWithScroll();var i=t.sidebarHeight+t.containerTop,n=t.viewportTop+t.topSpacing,s=t.viewportBottom-t.bottomSpacing;return"up"===this.direction?n<=t.containerTop?(t.translateY=0,e="STATIC"):n<=t.translateY+t.containerTop?(t.translateY=n-t.containerTop,e="VIEWPORT-TOP"):!this.isSidebarFitsViewport()&&t.containerTop<=n&&(e="VIEWPORT-UNBOTTOM"):this.isSidebarFitsViewport()?t.sidebarHeight+n>=t.containerBottom?(t.translateY=t.containerBottom-i,e="CONTAINER-BOTTOM"):n>=t.containerTop&&(t.translateY=n-t.containerTop,e="VIEWPORT-TOP"):t.containerBottom<=s?(t.translateY=t.containerBottom-i,e="CONTAINER-BOTTOM"):i+t.translateY<=s?(t.translateY=s-i,e="VIEWPORT-BOTTOM"):t.containerTop+t.translateY<=n&&(e="VIEWPORT-UNBOTTOM"),t.translateY=Math.max(0,t.translateY),t.translateY=Math.min(t.containerHeight,t.translateY),t.lastViewportTop=t.viewportTop,e}},{key:"_getStyle",value:function(t){if(void 0!==t){var e={inner:{},outer:{}},i=this.dimensions;switch(t){case"VIEWPORT-TOP":e.inner={position:"fixed",top:i.topSpacing,left:i.sidebarLeft-i.viewportLeft,width:i.sidebarWidth};break;case"VIEWPORT-BOTTOM":e.inner={position:"fixed",top:"auto",left:i.sidebarLeft,bottom:i.bottomSpacing,width:i.sidebarWidth};break;case"CONTAINER-BOTTOM":case"VIEWPORT-UNBOTTOM":var n=this._getTranslate(0,i.translateY+"px");e.inner=n?{transform:n}:{position:"absolute",top:i.translateY,width:i.sidebarWidth}}switch(t){case"VIEWPORT-TOP":case"VIEWPORT-BOTTOM":case"VIEWPORT-UNBOTTOM":case"CONTAINER-BOTTOM":e.outer={height:i.sidebarHeight,position:"relative"}}return e.outer=s.extend({height:"",position:""},e.outer),e.inner=s.extend({position:"relative",top:"",left:"",bottom:"",width:"",transform:this._getTranslate()},e.inner),e}}},{key:"stickyPosition",value:function(t){if(!this._breakpoint){t=this._reStyle||t||!1;var e=this.getAffixType(),n=this._getStyle(e);if((this.affixedType!=e||t)&&e){var o="affix."+e.toLowerCase().replace("viewport-","")+i;for(var r in s.eventTrigger(this.sidebar,o),"STATIC"===e?s.removeClass(this.sidebar,this.options.stickyClass):s.addClass(this.sidebar,this.options.stickyClass),n.outer)this.sidebar.style[r]=n.outer[r];for(var a in n.inner){var c="number"==typeof n.inner[a]?"px":"";this.sidebarInner.style[a]=n.inner[a]+c}var p="affixed."+e.toLowerCase().replace("viewport-","")+i;s.eventTrigger(this.sidebar,p)}else this._initialized&&(this.sidebarInner.style.left=n.inner.left);this.affixedType=e}}},{key:"_widthBreakpoint",value:function(){window.innerWidth<=this.options.minWidth?(this._breakpoint=!0,this.affixedType="STATIC",this.sidebar.removeAttribute("style"),s.removeClass(this.sidebar,this.options.stickyClass),this.sidebarInner.removeAttribute("style")):this._breakpoint=!1}},{key:"updateSticky",value:function(){var t,e=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._running||(this._running=!0,t=i.type,requestAnimationFrame((function(){switch(t){case"scroll":e._calcDimensionsWithScroll(),e.observeScrollDir(),e.stickyPosition();break;case"resize":default:e._widthBreakpoint(),e.calcDimensions(),e.stickyPosition(!0)}e._running=!1})))}},{key:"_setSupportFeatures",value:function(){var t=this.support;t.transform=s.supportTransform(),t.transform3d=s.supportTransform(!0)}},{key:"_getTranslate",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.support.transform3d?"translate3d("+t+", "+e+", "+i+")":!!this.support.translate&&"translate("+t+", "+e+")"}},{key:"destroy",value:function(){window.removeEventListener("resize",this,{caption:!1}),window.removeEventListener("scroll",this,{caption:!1}),this.sidebar.classList.remove(this.options.stickyClass),this.sidebar.style.minHeight="",this.sidebar.removeEventListener("update"+i,this);var t={inner:{},outer:{}};for(var e in t.inner={position:"",top:"",left:"",bottom:"",width:"",transform:""},t.outer={height:"",position:""},t.outer)this.sidebar.style[e]=t.outer[e];for(var n in t.inner)this.sidebarInner.style[n]=t.inner[n];this.options.resizeSensor&&"undefined"!=typeof ResizeSensor&&(ResizeSensor.detach(this.sidebarInner,this.handleEvent),ResizeSensor.detach(this.container,this.handleEvent))}}],[{key:"supportTransform",value:function(t){var e=!1,i=t?"perspective":"transform",n=i.charAt(0).toUpperCase()+i.slice(1),s=document.createElement("support").style;return(i+" "+["Webkit","Moz","O","ms"].join(n+" ")+n).split(" ").forEach((function(t,i){if(void 0!==s[t])return e=t,!1})),e}},{key:"eventTrigger",value:function(t,e,i){try{var n=new CustomEvent(e,{detail:i})}catch(t){(n=document.createEvent("CustomEvent")).initCustomEvent(e,!0,!0,i)}t.dispatchEvent(n)}},{key:"extend",value:function(t,e){var i={};for(var n in t)void 0!==e[n]?i[n]=e[n]:i[n]=t[n];return i}},{key:"offsetRelative",value:function(t){var e={left:0,top:0};do{var i=t.offsetTop,n=t.offsetLeft;isNaN(i)||(e.top+=i),isNaN(n)||(e.left+=n),t="BODY"===t.tagName?t.parentElement:t.offsetParent}while(t);return e}},{key:"addClass",value:function(t,e){s.hasClass(t,e)||(t.classList?t.classList.add(e):t.className+=" "+e)}},{key:"removeClass",value:function(t,e){s.hasClass(t,e)&&(t.classList?t.classList.remove(e):t.className=t.className.replace(new RegExp("(^|\\b)"+e.split(" ").join("|")+"(\\b|$)","gi")," "))}},{key:"hasClass",value:function(t,e){return t.classList?t.classList.contains(e):new RegExp("(^| )"+e+"( |$)","gi").test(t.className)}}]),s}());window.StickySidebar=s,function(){if("undefined"!=typeof window){var t=window.$||window.jQuery||window.Zepto,e="stickySidebar";if(t){t.fn.stickySidebar=function(i){return this.each((function(){var n=t(this),o=t(this).data(e);if(o||(o=new s(this,"object"==typeof i&&i),n.data(e,o)),"string"==typeof i){if(void 0===o[i]&&-1===["destroy","updateSticky"].indexOf(i))throw new Error('No method named "'+i+'"');o[i]()}}))},t.fn.stickySidebar.Constructor=s;var i=t.fn.stickySidebar;t.fn.stickySidebar.noConflict=function(){return t.fn.stickySidebar=i,this}}}}()}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInN0aWNreS1zaWRlYmFyLmpzIl0sIm5hbWVzIjpbImdsb2JhbCIsImZhY3RvcnkiLCJleHBvcnRzIiwibW9kdWxlIiwiZGVmaW5lIiwiYW1kIiwidGhpcyIsIl9jcmVhdGVDbGFzcyIsImRlZmluZVByb3BlcnRpZXMiLCJ0YXJnZXQiLCJwcm9wcyIsImkiLCJsZW5ndGgiLCJkZXNjcmlwdG9yIiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJrZXkiLCJDb25zdHJ1Y3RvciIsInByb3RvUHJvcHMiLCJzdGF0aWNQcm9wcyIsInByb3RvdHlwZSIsIl9jbGFzc0NhbGxDaGVjayIsImluc3RhbmNlIiwiVHlwZUVycm9yIiwiRVZFTlRfS0VZIiwiREVGQVVMVFMiLCJTdGlja3lTaWRlYmFyIiwidG9wU3BhY2luZyIsImJvdHRvbVNwYWNpbmciLCJjb250YWluZXJTZWxlY3RvciIsImlubmVyV3JhcHBlclNlbGVjdG9yIiwic3RpY2t5Q2xhc3MiLCJyZXNpemVTZW5zb3IiLCJtaW5XaWR0aCIsInNpZGViYXIiLCJfdGhpcyIsIm9wdGlvbnMiLCJhcmd1bWVudHMiLCJ1bmRlZmluZWQiLCJleHRlbmQiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJFcnJvciIsInNpZGViYXJJbm5lciIsImNvbnRhaW5lciIsInBhcmVudEVsZW1lbnQiLCJhZmZpeGVkVHlwZSIsImRpcmVjdGlvbiIsInN1cHBvcnQiLCJ0cmFuc2Zvcm0iLCJ0cmFuc2Zvcm0zZCIsIl9pbml0aWFsaXplZCIsIl9yZVN0eWxlIiwiX2JyZWFrcG9pbnQiLCJfcmVzaXplTGlzdGVuZXJzIiwiZGltZW5zaW9ucyIsInRyYW5zbGF0ZVkiLCJsYXN0VG9wU3BhY2luZyIsImxhc3RCb3R0b21TcGFjaW5nIiwic2lkZWJhckhlaWdodCIsInNpZGViYXJXaWR0aCIsImNvbnRhaW5lclRvcCIsImNvbnRhaW5lckhlaWdodCIsInZpZXdwb3J0SGVpZ2h0Iiwidmlld3BvcnRUb3AiLCJsYXN0Vmlld3BvcnRUb3AiLCJmb3JFYWNoIiwibWV0aG9kIiwiYmluZCIsImluaXRpYWxpemUiLCJ2YWx1ZSIsIl90aGlzMiIsIl9zZXRTdXBwb3J0RmVhdHVyZXMiLCJ3cmFwcGVyIiwiY3JlYXRlRWxlbWVudCIsInNldEF0dHJpYnV0ZSIsImFwcGVuZENoaWxkIiwiZmlyc3RDaGlsZCIsImNvbnRhaW5lcnMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiQXJyYXkiLCJzbGljZSIsImNhbGwiLCJpdGVtIiwiY29udGFpbnMiLCJwYXJzZUludCIsIl93aWR0aEJyZWFrcG9pbnQiLCJjYWxjRGltZW5zaW9ucyIsInN0aWNreVBvc2l0aW9uIiwiYmluZEV2ZW50cyIsIndpbmRvdyIsImFkZEV2ZW50TGlzdGVuZXIiLCJwYXNzaXZlIiwiY2FwdHVyZSIsIlJlc2l6ZVNlbnNvciIsImhhbmRsZUV2ZW50IiwiZXZlbnQiLCJ1cGRhdGVTdGlja3kiLCJkaW1zIiwib2Zmc2V0UmVsYXRpdmUiLCJ0b3AiLCJjbGllbnRIZWlnaHQiLCJjb250YWluZXJCb3R0b20iLCJvZmZzZXRIZWlnaHQiLCJvZmZzZXRXaWR0aCIsImlubmVySGVpZ2h0IiwiX2NhbGNEaW1lbnNpb25zV2l0aFNjcm9sbCIsInNpZGViYXJMZWZ0IiwibGVmdCIsImRvY3VtZW50RWxlbWVudCIsInNjcm9sbFRvcCIsImJvZHkiLCJ2aWV3cG9ydEJvdHRvbSIsInZpZXdwb3J0TGVmdCIsInNjcm9sbExlZnQiLCJmdXJ0aGVzdCIsIk1hdGgiLCJtaW4iLCJtYXgiLCJhZmZpeFR5cGUiLCJzaWRlYmFyQm90dG9tIiwiY29sbGlkZXJUb3AiLCJjb2xsaWRlckJvdHRvbSIsImlzU2lkZWJhckZpdHNWaWV3cG9ydCIsInN0eWxlIiwiaW5uZXIiLCJvdXRlciIsInBvc2l0aW9uIiwid2lkdGgiLCJib3R0b20iLCJ0cmFuc2xhdGUiLCJfZ2V0VHJhbnNsYXRlIiwiaGVpZ2h0IiwiZm9yY2UiLCJnZXRBZmZpeFR5cGUiLCJfZ2V0U3R5bGUiLCJhZmZpeEV2ZW50IiwidG9Mb3dlckNhc2UiLCJyZXBsYWNlIiwiZXZlbnRUcmlnZ2VyIiwicmVtb3ZlQ2xhc3MiLCJhZGRDbGFzcyIsIl9rZXkiLCJfdW5pdDIiLCJhZmZpeGVkRXZlbnQiLCJpbm5lcldpZHRoIiwicmVtb3ZlQXR0cmlidXRlIiwiZXZlbnRUeXBlIiwiX3RoaXMzIiwiX3J1bm5pbmciLCJ0eXBlIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwib2JzZXJ2ZVNjcm9sbERpciIsInN1cHBvcnRUcmFuc2Zvcm0iLCJ5IiwieCIsInoiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiY2FwdGlvbiIsImNsYXNzTGlzdCIsInJlbW92ZSIsIm1pbkhlaWdodCIsInN0eWxlUmVzZXQiLCJfa2V5MiIsImRldGFjaCIsInJlc3VsdCIsInByb3BlcnR5IiwidXBwZXIiLCJjaGFyQXQiLCJ0b1VwcGVyQ2FzZSIsImpvaW4iLCJzcGxpdCIsImVsZW1lbnQiLCJldmVudE5hbWUiLCJkYXRhIiwiQ3VzdG9tRXZlbnQiLCJkZXRhaWwiLCJlIiwiY3JlYXRlRXZlbnQiLCJpbml0Q3VzdG9tRXZlbnQiLCJkaXNwYXRjaEV2ZW50IiwiZGVmYXVsdHMiLCJyZXN1bHRzIiwib2Zmc2V0VG9wIiwib2Zmc2V0TGVmdCIsImlzTmFOIiwidGFnTmFtZSIsIm9mZnNldFBhcmVudCIsImNsYXNzTmFtZSIsImhhc0NsYXNzIiwiYWRkIiwiUmVnRXhwIiwidGVzdCIsInBsdWdpbiIsIiQiLCJqUXVlcnkiLCJaZXB0byIsIkRBVEFfTkFNRVNQQUNFIiwiZm4iLCJzdGlja3lTaWRlYmFyIiwiY29uZmlnIiwiZWFjaCIsIiR0aGlzIiwiaW5kZXhPZiIsIm9sZCIsIm5vQ29uZmxpY3QiXSwibWFwcGluZ3MiOiJDQUFDLFNBQVVBLEVBQVFDLEdBQ0MsaUJBQVpDLFNBQTBDLG9CQUFYQyxPQUF5QkYsSUFDN0MsbUJBQVhHLFFBQXlCQSxPQUFPQyxJQUFNRCxPQUFPSCxHQUNuREEsSUFIRixDQUlFSyxHQUFNLFdB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VUMsR0FDNUIsT0FBT3JNLEtBQUtzTSxNQUFLLFdBQ2YsSUFBSUMsRUFBUVQsRUFBTzlMLE1BQ2YySyxFQUFPbUIsRUFBTzlMLE1BQU0ySyxLQUFLdUIsR0FPN0IsR0FMS3ZCLElBQ0hBLEVBQU8sSUFBSXBKLEVBQWN2QixLQUF1QixpQkFBVnFNLEdBQXNCQSxHQUM1REUsRUFBTTVCLEtBQUt1QixFQUFnQnZCLElBR3pCLGlCQUFvQjBCLEVBQVEsQ0FDOUIsUUFBcUJsSyxJQUFqQndJLEVBQUswQixLQUEwRSxJQUFqRCxDQUFDLFVBQVcsZ0JBQWdCRyxRQUFRSCxHQUFnQixNQUFNLElBQUk5SixNQUFNLG9CQUFzQjhKLEVBQVMsS0FFckkxQixFQUFLMEIsVUFNWFAsRUFBT0ssR0FBR0MsY0FBY3RMLFlBQWNTLEVBRXRDLElBQUlrTCxFQUFNWCxFQUFPSyxHQUFHQyxjQUtwQk4sRUFBT0ssR0FBR0MsY0FBY00sV0FBYSxXQUVuQyxPQURBWixFQUFPSyxHQUFHQyxjQUFnQkssRUFDbkJ6TSxRQXhDYiIsImZpbGUiOiJzdGlja3ktc2lkZWJhci5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiAoZ2xvYmFsLCBmYWN0b3J5KSB7XG5cdHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyA/IGZhY3RvcnkoKSA6XG5cdHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCA/IGRlZmluZShmYWN0b3J5KSA6XG5cdChmYWN0b3J5KCkpO1xufSh0aGlzLCAoZnVuY3Rpb24gKCkgeyAndXNlIHN0cmljdCc7XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbi8qKlxyXG4gKiBTdGlja3kgU2lkZWJhciBKYXZhU2NyaXB0IFBsdWdpbi5cclxuICogQHZlcnNpb24gMy4zLjFcclxuICogQGF1dGhvciBBaG1lZCBCb3VodW9saWEgPGEuYm91aHVvbGlhQGdtYWlsLmNvbT5cclxuICogQGxpY2Vuc2UgVGhlIE1JVCBMaWNlbnNlIChNSVQpXHJcbiAqL1xudmFyIFN0aWNreVNpZGViYXIgPSBmdW5jdGlvbiAoKSB7XG5cbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIC8vICMgRGVmaW5lIENvbnN0YW50c1xuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgLy9cbiAgdmFyIEVWRU5UX0tFWSA9ICcuc3RpY2t5U2lkZWJhcic7XG4gIHZhciBERUZBVUxUUyA9IHtcblxuICAgIC8qKlxyXG4gICAgICogQWRkaXRpb25hbCB0b3Agc3BhY2luZyBvZiB0aGUgZWxlbWVudCB3aGVuIGl0IGJlY29tZXMgc3RpY2t5LlxyXG4gICAgICogQHR5cGUge051bWVyaWN8RnVuY3Rpb259XHJcbiAgICAgKi9cbiAgICB0b3BTcGFjaW5nOiAwLFxuXG4gICAgLyoqXHJcbiAgICAgKiBBZGRpdGlvbmFsIGJvdHRvbSBzcGFjaW5nIG9mIHRoZSBlbGVtZW50IHdoZW4gaXQgYmVjb21lcyBzdGlja3kuXHJcbiAgICAgKiBAdHlwZSB7TnVtZXJpY3xGdW5jdGlvbn1cclxuICAgICAqL1xuICAgIGJvdHRvbVNwYWNpbmc6IDAsXG5cbiAgICAvKipcclxuICAgICAqIENvbnRhaW5lciBzaWRlYmFyIHNlbGVjdG9yIHRvIGtub3cgd2hhdCB0aGUgYmVnaW5uaW5nIGFuZCBlbmQgb2Ygc3RpY2t5IGVsZW1lbnQuXHJcbiAgICAgKiBAdHlwZSB7U3RyaW5nfEZhbHNlfVxyXG4gICAgICovXG4gICAgY29udGFpbmVyU2VsZWN0b3I6IGZhbHNlLFxuXG4gICAgLyoqXHJcbiAgICAgKiBJbm5lciB3cmFwcGVyIHNlbGVjdG9yLlxyXG4gICAgICogQHR5cGUge1N0cmluZ31cclxuICAgICAqL1xuICAgIGlubmVyV3JhcHBlclNlbGVjdG9yOiAnLmlubmVyLXdyYXBwZXItc3RpY2t5JyxcblxuICAgIC8qKlxyXG4gICAgICogVGhlIG5hbWUgb2YgQ1NTIGNsYXNzIHRvIGFwcGx5IHRvIGVsZW1lbnRzIHdoZW4gdGhleSBoYXZlIGJlY29tZSBzdHVjay5cclxuICAgICAqIEB0eXBlIHtTdHJpbmd8RmFsc2V9XHJcbiAgICAgKi9cbiAgICBzdGlja3lDbGFzczogJ2lzLWFmZml4ZWQnLFxuXG4gICAgLyoqXHJcbiAgICAgKiBEZXRlY3Qgd2hlbiBzaWRlYmFyIGFuZCBpdHMgY29udGFpbmVyIGNoYW5nZSBoZWlnaHQgc28gcmUtY2FsY3VsYXRlIHRoZWlyIGRpbWVuc2lvbnMuXHJcbiAgICAgKiBAdHlwZSB7Qm9vbGVhbn1cclxuICAgICAqL1xuICAgIHJlc2l6ZVNlbnNvcjogdHJ1ZSxcblxuICAgIC8qKlxyXG4gICAgICogVGhlIHNpZGViYXIgcmV0dXJucyB0byBpdHMgbm9ybWFsIHBvc2l0aW9uIGlmIGl0cyB3aWR0aCBiZWxvdyB0aGlzIHZhbHVlLlxyXG4gICAgICogQHR5cGUge051bWVyaWN9XHJcbiAgICAgKi9cbiAgICBtaW5XaWR0aDogZmFsc2VcbiAgfTtcblxuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgLy8gIyBDbGFzcyBEZWZpbml0aW9uXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAvL1xuICAvKipcclxuICAgKiBTdGlja3kgU2lkZWJhciBDbGFzcy5cclxuICAgKiBAcHVibGljXHJcbiAgICovXG5cbiAgdmFyIFN0aWNreVNpZGViYXIgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICAvKipcclxuICAgICAqIFN0aWNreSBTaWRlYmFyIENvbnN0cnVjdG9yLlxyXG4gICAgICogQGNvbnN0cnVjdG9yXHJcbiAgICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fFN0cmluZ30gc2lkZWJhciAtIFRoZSBzaWRlYmFyIGVsZW1lbnQgb3Igc2lkZWJhciBzZWxlY3Rvci5cclxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIC0gVGhlIG9wdGlvbnMgb2Ygc3RpY2t5IHNpZGViYXIuXHJcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBTdGlja3lTaWRlYmFyKHNpZGViYXIpIHtcbiAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICAgIHZhciBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiB7fTtcblxuICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFN0aWNreVNpZGViYXIpO1xuXG4gICAgICB0aGlzLm9wdGlvbnMgPSBTdGlja3lTaWRlYmFyLmV4dGVuZChERUZBVUxUUywgb3B0aW9ucyk7XG5cbiAgICAgIC8vIFNpZGViYXIgZWxlbWVudCBxdWVyeSBpZiB0aGVyZSdzIG5vIG9uZSwgdGhyb3cgZXJyb3IuXG4gICAgICB0aGlzLnNpZGViYXIgPSAnc3RyaW5nJyA9PT0gdHlwZW9mIHNpZGViYXIgPyBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNpZGViYXIpIDogc2lkZWJhcjtcbiAgICAgIGlmICgndW5kZWZpbmVkJyA9PT0gdHlwZW9mIHRoaXMuc2lkZWJhcikgdGhyb3cgbmV3IEVycm9yKFwiVGhlcmUgaXMgbm8gc3BlY2lmaWMgc2lkZWJhciBlbGVtZW50LlwiKTtcblxuICAgICAgdGhpcy5zaWRlYmFySW5uZXIgPSBmYWxzZTtcbiAgICAgIHRoaXMuY29udGFpbmVyID0gdGhpcy5zaWRlYmFyLnBhcmVudEVsZW1lbnQ7XG5cbiAgICAgIC8vIEN1cnJlbnQgQWZmaXggVHlwZSBvZiBzaWRlYmFyIGVsZW1lbnQuXG4gICAgICB0aGlzLmFmZml4ZWRUeXBlID0gJ1NUQVRJQyc7XG4gICAgICB0aGlzLmRpcmVjdGlvbiA9ICdkb3duJztcbiAgICAgIHRoaXMuc3VwcG9ydCA9IHtcbiAgICAgICAgdHJhbnNmb3JtOiBmYWxzZSxcbiAgICAgICAgdHJhbnNmb3JtM2Q6IGZhbHNlXG4gICAgICB9O1xuXG4gICAgICB0aGlzLl9pbml0aWFsaXplZCA9IGZhbHNlO1xuICAgICAgdGhpcy5fcmVTdHlsZSA9IGZhbHNlO1xuICAgICAgdGhpcy5fYnJlYWtwb2ludCA9IGZhbHNlO1xuICAgICAgdGhpcy5fcmVzaXplTGlzdGVuZXJzID0gW107XG5cbiAgICAgIC8vIERpbWVuc2lvbnMgb2Ygc2lkZWJhciwgY29udGFpbmVyIGFuZCBzY3JlZW4gdmlld3BvcnQuXG4gICAgICB0aGlzLmRpbWVuc2lvbnMgPSB7XG4gICAgICAgIHRyYW5zbGF0ZVk6IDAsXG4gICAgICAgIHRvcFNwYWNpbmc6IDAsXG4gICAgICAgIGxhc3RUb3BTcGFjaW5nOiAwLFxuICAgICAgICBib3R0b21TcGFjaW5nOiAwLFxuICAgICAgICBsYXN0Qm90dG9tU3BhY2luZzogMCxcbiAgICAgICAgc2lkZWJhckhlaWdodDogMCxcbiAgICAgICAgc2lkZWJhcldpZHRoOiAwLFxuICAgICAgICBjb250YWluZXJUb3A6IDAsXG4gICAgICAgIGNvbnRhaW5lckhlaWdodDogMCxcbiAgICAgICAgdmlld3BvcnRIZWlnaHQ6IDAsXG4gICAgICAgIHZpZXdwb3J0VG9wOiAwLFxuICAgICAgICBsYXN0Vmlld3BvcnRUb3A6IDBcbiAgICAgIH07XG5cbiAgICAgIC8vIEJpbmQgZXZlbnQgaGFuZGxlcnMgZm9yIHJlZmVyZW5jYWJpbGl0eS5cbiAgICAgIFsnaGFuZGxlRXZlbnQnXS5mb3JFYWNoKGZ1bmN0aW9uIChtZXRob2QpIHtcbiAgICAgICAgX3RoaXNbbWV0aG9kXSA9IF90aGlzW21ldGhvZF0uYmluZChfdGhpcyk7XG4gICAgICB9KTtcblxuICAgICAgLy8gSW5pdGlhbGl6ZSBzdGlja3kgc2lkZWJhciBmb3IgZmlyc3QgdGltZS5cbiAgICAgIHRoaXMuaW5pdGlhbGl6ZSgpO1xuICAgIH1cblxuICAgIC8qKlxyXG4gICAgICogSW5pdGlhbGl6ZXMgdGhlIHN0aWNreSBzaWRlYmFyIGJ5IGFkZGluZyBpbm5lciB3cmFwcGVyLCBkZWZpbmUgaXRzIGNvbnRhaW5lciwgXHJcbiAgICAgKiBtaW4td2lkdGggYnJlYWtwb2ludCwgY2FsY3VsYXRpbmcgZGltZW5zaW9ucywgYWRkaW5nIGhlbHBlciBjbGFzc2VzIGFuZCBpbmxpbmUgc3R5bGUuXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICovXG5cblxuICAgIF9jcmVhdGVDbGFzcyhTdGlja3lTaWRlYmFyLCBbe1xuICAgICAga2V5OiAnaW5pdGlhbGl6ZScsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gaW5pdGlhbGl6ZSgpIHtcbiAgICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICAgICAgdGhpcy5fc2V0U3VwcG9ydEZlYXR1cmVzKCk7XG5cbiAgICAgICAgLy8gR2V0IHN0aWNreSBzaWRlYmFyIGlubmVyIHdyYXBwZXIsIGlmIG5vdCBmb3VuZCwgd2lsbCBjcmVhdGUgb25lLlxuICAgICAgICBpZiAodGhpcy5vcHRpb25zLmlubmVyV3JhcHBlclNlbGVjdG9yKSB7XG4gICAgICAgICAgdGhpcy5zaWRlYmFySW5uZXIgPSB0aGlzLnNpZGViYXIucXVlcnlTZWxlY3Rvcih0aGlzLm9wdGlvbnMuaW5uZXJXcmFwcGVyU2VsZWN0b3IpO1xuXG4gICAgICAgICAgaWYgKG51bGwgPT09IHRoaXMuc2lkZWJhcklubmVyKSB0aGlzLnNpZGViYXJJbm5lciA9IGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCF0aGlzLnNpZGViYXJJbm5lcikge1xuICAgICAgICAgIHZhciB3cmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgd3JhcHBlci5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ2lubmVyLXdyYXBwZXItc3RpY2t5Jyk7XG4gICAgICAgICAgdGhpcy5zaWRlYmFyLmFwcGVuZENoaWxkKHdyYXBwZXIpO1xuXG4gICAgICAgICAgd2hpbGUgKHRoaXMuc2lkZWJhci5maXJzdENoaWxkICE9IHdyYXBwZXIpIHtcbiAgICAgICAgICAgIHdyYXBwZXIuYXBwZW5kQ2hpbGQodGhpcy5zaWRlYmFyLmZpcnN0Q2hpbGQpO1xuICAgICAgICAgIH10aGlzLnNpZGViYXJJbm5lciA9IHRoaXMuc2lkZWJhci5xdWVyeVNlbGVjdG9yKCcuaW5uZXItd3JhcHBlci1zdGlja3knKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIENvbnRhaW5lciB3cmFwcGVyIG9mIHRoZSBzaWRlYmFyLlxuICAgICAgICBpZiAodGhpcy5vcHRpb25zLmNvbnRhaW5lclNlbGVjdG9yKSB7XG4gICAgICAgICAgdmFyIGNvbnRhaW5lcnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMub3B0aW9ucy5jb250YWluZXJTZWxlY3Rvcik7XG4gICAgICAgICAgY29udGFpbmVycyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGNvbnRhaW5lcnMpO1xuXG4gICAgICAgICAgY29udGFpbmVycy5mb3JFYWNoKGZ1bmN0aW9uIChjb250YWluZXIsIGl0ZW0pIHtcbiAgICAgICAgICAgIGlmICghY29udGFpbmVyLmNvbnRhaW5zKF90aGlzMi5zaWRlYmFyKSkgcmV0dXJuO1xuICAgICAgICAgICAgX3RoaXMyLmNvbnRhaW5lciA9IGNvbnRhaW5lcjtcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIGlmICghY29udGFpbmVycy5sZW5ndGgpIHRocm93IG5ldyBFcnJvcihcIlRoZSBjb250YWluZXIgZG9lcyBub3QgY29udGFpbnMgb24gdGhlIHNpZGViYXIuXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gSWYgdG9wL2JvdHRvbSBzcGFjaW5nIGlzIG5vdCBmdW5jdGlvbiBwYXJzZSB2YWx1ZSB0byBpbnRlZ2VyLlxuICAgICAgICBpZiAoJ2Z1bmN0aW9uJyAhPT0gdHlwZW9mIHRoaXMub3B0aW9ucy50b3BTcGFjaW5nKSB0aGlzLm9wdGlvbnMudG9wU3BhY2luZyA9IHBhcnNlSW50KHRoaXMub3B0aW9ucy50b3BTcGFjaW5nKSB8fCAwO1xuXG4gICAgICAgIGlmICgnZnVuY3Rpb24nICE9PSB0eXBlb2YgdGhpcy5vcHRpb25zLmJvdHRvbVNwYWNpbmcpIHRoaXMub3B0aW9ucy5ib3R0b21TcGFjaW5nID0gcGFyc2VJbnQodGhpcy5vcHRpb25zLmJvdHRvbVNwYWNpbmcpIHx8IDA7XG5cbiAgICAgICAgLy8gQnJlYWtkb3duIHN0aWNreSBzaWRlYmFyIGlmIHNjcmVlbiB3aWR0aCBiZWxvdyBgb3B0aW9ucy5taW5XaWR0aGAuXG4gICAgICAgIHRoaXMuX3dpZHRoQnJlYWtwb2ludCgpO1xuXG4gICAgICAgIC8vIENhbGN1bGF0ZSBkaW1lbnNpb25zIG9mIHNpZGViYXIsIGNvbnRhaW5lciBhbmQgdmlld3BvcnQuXG4gICAgICAgIHRoaXMuY2FsY0RpbWVuc2lvbnMoKTtcblxuICAgICAgICAvLyBBZmZpeCBzaWRlYmFyIGluIHByb3BlciBwb3NpdGlvbi5cbiAgICAgICAgdGhpcy5zdGlja3lQb3NpdGlvbigpO1xuXG4gICAgICAgIC8vIEJpbmQgYWxsIGV2ZW50cy5cbiAgICAgICAgdGhpcy5iaW5kRXZlbnRzKCk7XG5cbiAgICAgICAgLy8gSW5mb3JtIG90aGVyIHByb3BlcnRpZXMgdGhlIHN0aWNreSBzaWRlYmFyIGlzIGluaXRpYWxpemVkLlxuICAgICAgICB0aGlzLl9pbml0aWFsaXplZCA9IHRydWU7XG4gICAgICB9XG5cbiAgICAgIC8qKlxyXG4gICAgICAgKiBCaW5kIGFsbCBldmVudHMgb2Ygc3RpY2t5IHNpZGViYXIgcGx1Z2luLlxyXG4gICAgICAgKiBAcHJvdGVjdGVkXHJcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiAnYmluZEV2ZW50cycsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gYmluZEV2ZW50cygpIHtcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHRoaXMsIHsgcGFzc2l2ZTogdHJ1ZSwgY2FwdHVyZTogZmFsc2UgfSk7XG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCB0aGlzLCB7IHBhc3NpdmU6IHRydWUsIGNhcHR1cmU6IGZhbHNlIH0pO1xuXG4gICAgICAgIHRoaXMuc2lkZWJhci5hZGRFdmVudExpc3RlbmVyKCd1cGRhdGUnICsgRVZFTlRfS0VZLCB0aGlzKTtcblxuICAgICAgICBpZiAodGhpcy5vcHRpb25zLnJlc2l6ZVNlbnNvciAmJiAndW5kZWZpbmVkJyAhPT0gdHlwZW9mIFJlc2l6ZVNlbnNvcikge1xuICAgICAgICAgIG5ldyBSZXNpemVTZW5zb3IodGhpcy5zaWRlYmFySW5uZXIsIHRoaXMuaGFuZGxlRXZlbnQpO1xuICAgICAgICAgIG5ldyBSZXNpemVTZW5zb3IodGhpcy5jb250YWluZXIsIHRoaXMuaGFuZGxlRXZlbnQpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8qKlxyXG4gICAgICAgKiBIYW5kbGVzIGFsbCBldmVudHMgb2YgdGhlIHBsdWdpbi5cclxuICAgICAgICogQHBhcmFtIHtPYmplY3R9IGV2ZW50IC0gRXZlbnQgb2JqZWN0IHBhc3NlZCBmcm9tIGxpc3RlbmVyLlxyXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogJ2hhbmRsZUV2ZW50JyxcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBoYW5kbGVFdmVudChldmVudCkge1xuICAgICAgICB0aGlzLnVwZGF0ZVN0aWNreShldmVudCk7XG4gICAgICB9XG5cbiAgICAgIC8qKlxyXG4gICAgICAgKiBDYWxjdWxhdGVzIGRpbWVuc2lvbnMgb2Ygc2lkZWJhciwgY29udGFpbmVyIGFuZCBzY3JlZW4gdmlld3BvaW50XHJcbiAgICAgICAqIEBwdWJsaWNcclxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6ICdjYWxjRGltZW5zaW9ucycsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gY2FsY0RpbWVuc2lvbnMoKSB7XG4gICAgICAgIGlmICh0aGlzLl9icmVha3BvaW50KSByZXR1cm47XG4gICAgICAgIHZhciBkaW1zID0gdGhpcy5kaW1lbnNpb25zO1xuXG4gICAgICAgIC8vIENvbnRhaW5lciBvZiBzdGlja3kgc2lkZWJhciBkaW1lbnNpb25zLlxuICAgICAgICBkaW1zLmNvbnRhaW5lclRvcCA9IFN0aWNreVNpZGViYXIub2Zmc2V0UmVsYXRpdmUodGhpcy5jb250YWluZXIpLnRvcDtcbiAgICAgICAgZGltcy5jb250YWluZXJIZWlnaHQgPSB0aGlzLmNvbnRhaW5lci5jbGllbnRIZWlnaHQ7XG4gICAgICAgIGRpbXMuY29udGFpbmVyQm90dG9tID0gZGltcy5jb250YWluZXJUb3AgKyBkaW1zLmNvbnRhaW5lckhlaWdodDtcblxuICAgICAgICAvLyBTaWRlYmFyIGRpbWVuc2lvbnMuXG4gICAgICAgIGRpbXMuc2lkZWJhckhlaWdodCA9IHRoaXMuc2lkZWJhcklubmVyLm9mZnNldEhlaWdodDtcbiAgICAgICAgZGltcy5zaWRlYmFyV2lkdGggPSB0aGlzLnNpZGViYXIub2Zmc2V0V2lkdGg7XG5cbiAgICAgICAgLy8gU2NyZWVuIHZpZXdwb3J0IGRpbWVuc2lvbnMuXG4gICAgICAgIGRpbXMudmlld3BvcnRIZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQ7XG5cbiAgICAgICAgdGhpcy5fY2FsY0RpbWVuc2lvbnNXaXRoU2Nyb2xsKCk7XG4gICAgICB9XG5cbiAgICAgIC8qKlxyXG4gICAgICAgKiBTb21lIGRpbWVuc2lvbnMgdmFsdWVzIG5lZWQgdG8gYmUgdXAtdG8tZGF0ZSB3aGVuIHNjcm9sbGluZyB0aGUgcGFnZS5cclxuICAgICAgICogQHByaXZhdGVcclxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6ICdfY2FsY0RpbWVuc2lvbnNXaXRoU2Nyb2xsJyxcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfY2FsY0RpbWVuc2lvbnNXaXRoU2Nyb2xsKCkge1xuICAgICAgICB2YXIgZGltcyA9IHRoaXMuZGltZW5zaW9ucztcblxuICAgICAgICBkaW1zLnNpZGViYXJMZWZ0ID0gU3RpY2t5U2lkZWJhci5vZmZzZXRSZWxhdGl2ZSh0aGlzLnNpZGViYXIpLmxlZnQ7XG5cbiAgICAgICAgZGltcy52aWV3cG9ydFRvcCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3AgfHwgZG9jdW1lbnQuYm9keS5zY3JvbGxUb3A7XG4gICAgICAgIGRpbXMudmlld3BvcnRCb3R0b20gPSBkaW1zLnZpZXdwb3J0VG9wICsgZGltcy52aWV3cG9ydEhlaWdodDtcbiAgICAgICAgZGltcy52aWV3cG9ydExlZnQgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsTGVmdCB8fCBkb2N1bWVudC5ib2R5LnNjcm9sbExlZnQ7XG5cbiAgICAgICAgZGltcy50b3BTcGFjaW5nID0gdGhpcy5vcHRpb25zLnRvcFNwYWNpbmc7XG4gICAgICAgIGRpbXMuYm90dG9tU3BhY2luZyA9IHRoaXMub3B0aW9ucy5ib3R0b21TcGFjaW5nO1xuXG4gICAgICAgIGlmICgnZnVuY3Rpb24nID09PSB0eXBlb2YgZGltcy50b3BTcGFjaW5nKSBkaW1zLnRvcFNwYWNpbmcgPSBwYXJzZUludChkaW1zLnRvcFNwYWNpbmcodGhpcy5zaWRlYmFyKSkgfHwgMDtcblxuICAgICAgICBpZiAoJ2Z1bmN0aW9uJyA9PT0gdHlwZW9mIGRpbXMuYm90dG9tU3BhY2luZykgZGltcy5ib3R0b21TcGFjaW5nID0gcGFyc2VJbnQoZGltcy5ib3R0b21TcGFjaW5nKHRoaXMuc2lkZWJhcikpIHx8IDA7XG5cbiAgICAgICAgaWYgKCdWSUVXUE9SVC1UT1AnID09PSB0aGlzLmFmZml4ZWRUeXBlKSB7XG4gICAgICAgICAgLy8gQWRqdXN0IHRyYW5zbGF0ZSBZIGluIHRoZSBjYXNlIGRlY3JlYXNlIHRvcCBzcGFjaW5nIHZhbHVlLlxuICAgICAgICAgIGlmIChkaW1zLnRvcFNwYWNpbmcgPCBkaW1zLmxhc3RUb3BTcGFjaW5nKSB7XG4gICAgICAgICAgICBkaW1zLnRyYW5zbGF0ZVkgKz0gZGltcy5sYXN0VG9wU3BhY2luZyAtIGRpbXMudG9wU3BhY2luZztcbiAgICAgICAgICAgIHRoaXMuX3JlU3R5bGUgPSB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmICgnVklFV1BPUlQtQk9UVE9NJyA9PT0gdGhpcy5hZmZpeGVkVHlwZSkge1xuICAgICAgICAgIC8vIEFkanVzdCB0cmFuc2xhdGUgWSBpbiB0aGUgY2FzZSBkZWNyZWFzZSBib3R0b20gc3BhY2luZyB2YWx1ZS5cbiAgICAgICAgICBpZiAoZGltcy5ib3R0b21TcGFjaW5nIDwgZGltcy5sYXN0Qm90dG9tU3BhY2luZykge1xuICAgICAgICAgICAgZGltcy50cmFuc2xhdGVZICs9IGRpbXMubGFzdEJvdHRvbVNwYWNpbmcgLSBkaW1zLmJvdHRvbVNwYWNpbmc7XG4gICAgICAgICAgICB0aGlzLl9yZVN0eWxlID0gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBkaW1zLmxhc3RUb3BTcGFjaW5nID0gZGltcy50b3BTcGFjaW5nO1xuICAgICAgICBkaW1zLmxhc3RCb3R0b21TcGFjaW5nID0gZGltcy5ib3R0b21TcGFjaW5nO1xuICAgICAgfVxuXG4gICAgICAvKipcclxuICAgICAgICogRGV0ZXJtaW5lIHdoZXRoZXIgdGhlIHNpZGViYXIgaXMgYmlnZ2VyIHRoYW4gdmlld3BvcnQuXHJcbiAgICAgICAqIEBwdWJsaWNcclxuICAgICAgICogQHJldHVybiB7Qm9vbGVhbn1cclxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6ICdpc1NpZGViYXJGaXRzVmlld3BvcnQnLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGlzU2lkZWJhckZpdHNWaWV3cG9ydCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGltZW5zaW9ucy5zaWRlYmFySGVpZ2h0IDwgdGhpcy5kaW1lbnNpb25zLnZpZXdwb3J0SGVpZ2h0O1xuICAgICAgfVxuXG4gICAgICAvKipcclxuICAgICAgICogT2JzZXJ2ZSBicm93c2VyIHNjcm9sbGluZyBkaXJlY3Rpb24gdG9wIGFuZCBkb3duLlxyXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogJ29ic2VydmVTY3JvbGxEaXInLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIG9ic2VydmVTY3JvbGxEaXIoKSB7XG4gICAgICAgIHZhciBkaW1zID0gdGhpcy5kaW1lbnNpb25zO1xuICAgICAgICBpZiAoZGltcy5sYXN0Vmlld3BvcnRUb3AgPT09IGRpbXMudmlld3BvcnRUb3ApIHJldHVybjtcblxuICAgICAgICB2YXIgZnVydGhlc3QgPSAnZG93bicgPT09IHRoaXMuZGlyZWN0aW9uID8gTWF0aC5taW4gOiBNYXRoLm1heDtcblxuICAgICAgICAvLyBJZiB0aGUgYnJvd3NlciBpcyBzY3JvbGxpbmcgbm90IGluIHRoZSBzYW1lIGRpcmVjdGlvbi5cbiAgICAgICAgaWYgKGRpbXMudmlld3BvcnRUb3AgPT09IGZ1cnRoZXN0KGRpbXMudmlld3BvcnRUb3AsIGRpbXMubGFzdFZpZXdwb3J0VG9wKSkgdGhpcy5kaXJlY3Rpb24gPSAnZG93bicgPT09IHRoaXMuZGlyZWN0aW9uID8gJ3VwJyA6ICdkb3duJztcbiAgICAgIH1cblxuICAgICAgLyoqXHJcbiAgICAgICAqIEdldHMgYWZmaXggdHlwZSBvZiBzaWRlYmFyIGFjY29yZGluZyB0byBjdXJyZW50IHNjcm9sbFRvcCBhbmQgc2Nyb2xsTGVmdC5cclxuICAgICAgICogSG9sZHMgYWxsIGxvZ2ljYWwgYWZmaXggb2YgdGhlIHNpZGViYXIgd2hlbiBzY3JvbGxpbmcgdXAgYW5kIGRvd24gYW5kIHdoZW4gc2lkZWJhciBcclxuICAgICAgICogaXMgYmlnZ2VyIHRoYW4gdmlld3BvcnQgYW5kIHZpY2UgdmVyc2EuXHJcbiAgICAgICAqIEBwdWJsaWNcclxuICAgICAgICogQHJldHVybiB7U3RyaW5nfEZhbHNlfSAtIFByb3BlciBhZmZpeCB0eXBlLlxyXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogJ2dldEFmZml4VHlwZScsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0QWZmaXhUeXBlKCkge1xuICAgICAgICB2YXIgZGltcyA9IHRoaXMuZGltZW5zaW9ucyxcbiAgICAgICAgICAgIGFmZml4VHlwZSA9IGZhbHNlO1xuXG4gICAgICAgIHRoaXMuX2NhbGNEaW1lbnNpb25zV2l0aFNjcm9sbCgpO1xuXG4gICAgICAgIHZhciBzaWRlYmFyQm90dG9tID0gZGltcy5zaWRlYmFySGVpZ2h0ICsgZGltcy5jb250YWluZXJUb3A7XG4gICAgICAgIHZhciBjb2xsaWRlclRvcCA9IGRpbXMudmlld3BvcnRUb3AgKyBkaW1zLnRvcFNwYWNpbmc7XG4gICAgICAgIHZhciBjb2xsaWRlckJvdHRvbSA9IGRpbXMudmlld3BvcnRCb3R0b20gLSBkaW1zLmJvdHRvbVNwYWNpbmc7XG5cbiAgICAgICAgLy8gV2hlbiBicm93c2VyIGlzIHNjcm9sbGluZyB0b3AuXG4gICAgICAgIGlmICgndXAnID09PSB0aGlzLmRpcmVjdGlvbikge1xuICAgICAgICAgIGlmIChjb2xsaWRlclRvcCA8PSBkaW1zLmNvbnRhaW5lclRvcCkge1xuICAgICAgICAgICAgZGltcy50cmFuc2xhdGVZID0gMDtcbiAgICAgICAgICAgIGFmZml4VHlwZSA9ICdTVEFUSUMnO1xuICAgICAgICAgIH0gZWxzZSBpZiAoY29sbGlkZXJUb3AgPD0gZGltcy50cmFuc2xhdGVZICsgZGltcy5jb250YWluZXJUb3ApIHtcbiAgICAgICAgICAgIGRpbXMudHJhbnNsYXRlWSA9IGNvbGxpZGVyVG9wIC0gZGltcy5jb250YWluZXJUb3A7XG4gICAgICAgICAgICBhZmZpeFR5cGUgPSAnVklFV1BPUlQtVE9QJztcbiAgICAgICAgICB9IGVsc2UgaWYgKCF0aGlzLmlzU2lkZWJhckZpdHNWaWV3cG9ydCgpICYmIGRpbXMuY29udGFpbmVyVG9wIDw9IGNvbGxpZGVyVG9wKSB7XG4gICAgICAgICAgICBhZmZpeFR5cGUgPSAnVklFV1BPUlQtVU5CT1RUT00nO1xuICAgICAgICAgIH1cbiAgICAgICAgICAvLyBXaGVuIGJyb3dzZXIgaXMgc2Nyb2xsaW5nIHVwLlxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIFdoZW4gc2lkZWJhciBlbGVtZW50IGlzIG5vdCBiaWdnZXIgdGhhbiBzY3JlZW4gdmlld3BvcnQuXG4gICAgICAgICAgaWYgKHRoaXMuaXNTaWRlYmFyRml0c1ZpZXdwb3J0KCkpIHtcblxuICAgICAgICAgICAgaWYgKGRpbXMuc2lkZWJhckhlaWdodCArIGNvbGxpZGVyVG9wID49IGRpbXMuY29udGFpbmVyQm90dG9tKSB7XG4gICAgICAgICAgICAgIGRpbXMudHJhbnNsYXRlWSA9IGRpbXMuY29udGFpbmVyQm90dG9tIC0gc2lkZWJhckJvdHRvbTtcbiAgICAgICAgICAgICAgYWZmaXhUeXBlID0gJ0NPTlRBSU5FUi1CT1RUT00nO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChjb2xsaWRlclRvcCA+PSBkaW1zLmNvbnRhaW5lclRvcCkge1xuICAgICAgICAgICAgICBkaW1zLnRyYW5zbGF0ZVkgPSBjb2xsaWRlclRvcCAtIGRpbXMuY29udGFpbmVyVG9wO1xuICAgICAgICAgICAgICBhZmZpeFR5cGUgPSAnVklFV1BPUlQtVE9QJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFdoZW4gc2lkZWJhciBlbGVtZW50IGlzIGJpZ2dlciB0aGFuIHNjcmVlbiB2aWV3cG9ydC5cbiAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICBpZiAoZGltcy5jb250YWluZXJCb3R0b20gPD0gY29sbGlkZXJCb3R0b20pIHtcbiAgICAgICAgICAgICAgZGltcy50cmFuc2xhdGVZID0gZGltcy5jb250YWluZXJCb3R0b20gLSBzaWRlYmFyQm90dG9tO1xuICAgICAgICAgICAgICBhZmZpeFR5cGUgPSAnQ09OVEFJTkVSLUJPVFRPTSc7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHNpZGViYXJCb3R0b20gKyBkaW1zLnRyYW5zbGF0ZVkgPD0gY29sbGlkZXJCb3R0b20pIHtcbiAgICAgICAgICAgICAgZGltcy50cmFuc2xhdGVZID0gY29sbGlkZXJCb3R0b20gLSBzaWRlYmFyQm90dG9tO1xuICAgICAgICAgICAgICBhZmZpeFR5cGUgPSAnVklFV1BPUlQtQk9UVE9NJztcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZGltcy5jb250YWluZXJUb3AgKyBkaW1zLnRyYW5zbGF0ZVkgPD0gY29sbGlkZXJUb3ApIHtcbiAgICAgICAgICAgICAgYWZmaXhUeXBlID0gJ1ZJRVdQT1JULVVOQk9UVE9NJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBNYWtlIHN1cmUgdGhlIHRyYW5zbGF0ZSBZIGlzIG5vdCBiaWdnZXIgdGhhbiBjb250YWluZXIgaGVpZ2h0LlxuICAgICAgICBkaW1zLnRyYW5zbGF0ZVkgPSBNYXRoLm1heCgwLCBkaW1zLnRyYW5zbGF0ZVkpO1xuICAgICAgICBkaW1zLnRyYW5zbGF0ZVkgPSBNYXRoLm1pbihkaW1zLmNvbnRhaW5lckhlaWdodCwgZGltcy50cmFuc2xhdGVZKTtcblxuICAgICAgICBkaW1zLmxhc3RWaWV3cG9ydFRvcCA9IGRpbXMudmlld3BvcnRUb3A7XG4gICAgICAgIHJldHVybiBhZmZpeFR5cGU7XG4gICAgICB9XG5cbiAgICAgIC8qKlxyXG4gICAgICAgKiBHZXRzIGlubGluZSBzdHlsZSBvZiBzdGlja3kgc2lkZWJhciB3cmFwcGVyIGFuZCBpbm5lciB3cmFwcGVyIGFjY29yZGluZyBcclxuICAgICAgICogdG8gaXRzIGFmZml4IHR5cGUuXHJcbiAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAqIEBwYXJhbSB7U3RyaW5nfSBhZmZpeFR5cGUgLSBBZmZpeCB0eXBlIG9mIHN0aWNreSBzaWRlYmFyLlxyXG4gICAgICAgKiBAcmV0dXJuIHtPYmplY3R9XHJcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiAnX2dldFN0eWxlJyxcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfZ2V0U3R5bGUoYWZmaXhUeXBlKSB7XG4gICAgICAgIGlmICgndW5kZWZpbmVkJyA9PT0gdHlwZW9mIGFmZml4VHlwZSkgcmV0dXJuO1xuXG4gICAgICAgIHZhciBzdHlsZSA9IHsgaW5uZXI6IHt9LCBvdXRlcjoge30gfTtcbiAgICAgICAgdmFyIGRpbXMgPSB0aGlzLmRpbWVuc2lvbnM7XG5cbiAgICAgICAgc3dpdGNoIChhZmZpeFR5cGUpIHtcbiAgICAgICAgICBjYXNlICdWSUVXUE9SVC1UT1AnOlxuICAgICAgICAgICAgc3R5bGUuaW5uZXIgPSB7IHBvc2l0aW9uOiAnZml4ZWQnLCB0b3A6IGRpbXMudG9wU3BhY2luZyxcbiAgICAgICAgICAgICAgbGVmdDogZGltcy5zaWRlYmFyTGVmdCAtIGRpbXMudmlld3BvcnRMZWZ0LCB3aWR0aDogZGltcy5zaWRlYmFyV2lkdGggfTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgJ1ZJRVdQT1JULUJPVFRPTSc6XG4gICAgICAgICAgICBzdHlsZS5pbm5lciA9IHsgcG9zaXRpb246ICdmaXhlZCcsIHRvcDogJ2F1dG8nLCBsZWZ0OiBkaW1zLnNpZGViYXJMZWZ0LFxuICAgICAgICAgICAgICBib3R0b206IGRpbXMuYm90dG9tU3BhY2luZywgd2lkdGg6IGRpbXMuc2lkZWJhcldpZHRoIH07XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlICdDT05UQUlORVItQk9UVE9NJzpcbiAgICAgICAgICBjYXNlICdWSUVXUE9SVC1VTkJPVFRPTSc6XG4gICAgICAgICAgICB2YXIgdHJhbnNsYXRlID0gdGhpcy5fZ2V0VHJhbnNsYXRlKDAsIGRpbXMudHJhbnNsYXRlWSArICdweCcpO1xuXG4gICAgICAgICAgICBpZiAodHJhbnNsYXRlKSBzdHlsZS5pbm5lciA9IHsgdHJhbnNmb3JtOiB0cmFuc2xhdGUgfTtlbHNlIHN0eWxlLmlubmVyID0geyBwb3NpdGlvbjogJ2Fic29sdXRlJywgdG9wOiBkaW1zLnRyYW5zbGF0ZVksIHdpZHRoOiBkaW1zLnNpZGViYXJXaWR0aCB9O1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cblxuICAgICAgICBzd2l0Y2ggKGFmZml4VHlwZSkge1xuICAgICAgICAgIGNhc2UgJ1ZJRVdQT1JULVRPUCc6XG4gICAgICAgICAgY2FzZSAnVklFV1BPUlQtQk9UVE9NJzpcbiAgICAgICAgICBjYXNlICdWSUVXUE9SVC1VTkJPVFRPTSc6XG4gICAgICAgICAgY2FzZSAnQ09OVEFJTkVSLUJPVFRPTSc6XG4gICAgICAgICAgICBzdHlsZS5vdXRlciA9IHsgaGVpZ2h0OiBkaW1zLnNpZGViYXJIZWlnaHQsIHBvc2l0aW9uOiAncmVsYXRpdmUnIH07XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICAgIHN0eWxlLm91dGVyID0gU3RpY2t5U2lkZWJhci5leHRlbmQoeyBoZWlnaHQ6ICcnLCBwb3NpdGlvbjogJycgfSwgc3R5bGUub3V0ZXIpO1xuICAgICAgICBzdHlsZS5pbm5lciA9IFN0aWNreVNpZGViYXIuZXh0ZW5kKHsgcG9zaXRpb246ICdyZWxhdGl2ZScsIHRvcDogJycsIGxlZnQ6ICcnLFxuICAgICAgICAgIGJvdHRvbTogJycsIHdpZHRoOiAnJywgdHJhbnNmb3JtOiB0aGlzLl9nZXRUcmFuc2xhdGUoKSB9LCBzdHlsZS5pbm5lcik7XG5cbiAgICAgICAgcmV0dXJuIHN0eWxlO1xuICAgICAgfVxuXG4gICAgICAvKipcclxuICAgICAgICogQ2F1c2UgdGhlIHNpZGViYXIgdG8gYmUgc3RpY2t5IGFjY29yZGluZyB0byBhZmZpeCB0eXBlIGJ5IGFkZGluZyBpbmxpbmVcclxuICAgICAgICogc3R5bGUsIGFkZGluZyBoZWxwZXIgY2xhc3MgYW5kIHRyaWdnZXIgZXZlbnRzLlxyXG4gICAgICAgKiBAZnVuY3Rpb25cclxuICAgICAgICogQHByb3RlY3RlZFxyXG4gICAgICAgKiBAcGFyYW0ge3N0cmluZ30gZm9yY2UgLSBVcGRhdGUgc3RpY2t5IHNpZGViYXIgcG9zaXRpb24gYnkgZm9yY2UuXHJcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiAnc3RpY2t5UG9zaXRpb24nLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIHN0aWNreVBvc2l0aW9uKGZvcmNlKSB7XG4gICAgICAgIGlmICh0aGlzLl9icmVha3BvaW50KSByZXR1cm47XG5cbiAgICAgICAgZm9yY2UgPSB0aGlzLl9yZVN0eWxlIHx8IGZvcmNlIHx8IGZhbHNlO1xuXG4gICAgICAgIHZhciBhZmZpeFR5cGUgPSB0aGlzLmdldEFmZml4VHlwZSgpO1xuICAgICAgICB2YXIgc3R5bGUgPSB0aGlzLl9nZXRTdHlsZShhZmZpeFR5cGUpO1xuXG4gICAgICAgIGlmICgodGhpcy5hZmZpeGVkVHlwZSAhPSBhZmZpeFR5cGUgfHwgZm9yY2UpICYmIGFmZml4VHlwZSkge1xuICAgICAgICAgIHZhciBhZmZpeEV2ZW50ID0gJ2FmZml4LicgKyBhZmZpeFR5cGUudG9Mb3dlckNhc2UoKS5yZXBsYWNlKCd2aWV3cG9ydC0nLCAnJykgKyBFVkVOVF9LRVk7XG4gICAgICAgICAgU3RpY2t5U2lkZWJhci5ldmVudFRyaWdnZXIodGhpcy5zaWRlYmFyLCBhZmZpeEV2ZW50KTtcblxuICAgICAgICAgIGlmICgnU1RBVElDJyA9PT0gYWZmaXhUeXBlKSBTdGlja3lTaWRlYmFyLnJlbW92ZUNsYXNzKHRoaXMuc2lkZWJhciwgdGhpcy5vcHRpb25zLnN0aWNreUNsYXNzKTtlbHNlIFN0aWNreVNpZGViYXIuYWRkQ2xhc3ModGhpcy5zaWRlYmFyLCB0aGlzLm9wdGlvbnMuc3RpY2t5Q2xhc3MpO1xuXG4gICAgICAgICAgZm9yICh2YXIga2V5IGluIHN0eWxlLm91dGVyKSB7XG4gICAgICAgICAgICB0aGlzLnNpZGViYXIuc3R5bGVba2V5XSA9IHN0eWxlLm91dGVyW2tleV07XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgZm9yICh2YXIgX2tleSBpbiBzdHlsZS5pbm5lcikge1xuICAgICAgICAgICAgdmFyIF91bml0MiA9ICdudW1iZXInID09PSB0eXBlb2Ygc3R5bGUuaW5uZXJbX2tleV0gPyAncHgnIDogJyc7XG4gICAgICAgICAgICB0aGlzLnNpZGViYXJJbm5lci5zdHlsZVtfa2V5XSA9IHN0eWxlLmlubmVyW19rZXldICsgX3VuaXQyO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHZhciBhZmZpeGVkRXZlbnQgPSAnYWZmaXhlZC4nICsgYWZmaXhUeXBlLnRvTG93ZXJDYXNlKCkucmVwbGFjZSgndmlld3BvcnQtJywgJycpICsgRVZFTlRfS0VZO1xuICAgICAgICAgIFN0aWNreVNpZGViYXIuZXZlbnRUcmlnZ2VyKHRoaXMuc2lkZWJhciwgYWZmaXhlZEV2ZW50KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAodGhpcy5faW5pdGlhbGl6ZWQpIHRoaXMuc2lkZWJhcklubmVyLnN0eWxlLmxlZnQgPSBzdHlsZS5pbm5lci5sZWZ0O1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5hZmZpeGVkVHlwZSA9IGFmZml4VHlwZTtcbiAgICAgIH1cblxuICAgICAgLyoqXHJcbiAgICAgICAqIEJyZWFrZG93biBzdGlja3kgc2lkZWJhciB3aGVuIHdpbmRvdyB3aWR0aCBpcyBiZWxvdyBgb3B0aW9ucy5taW5XaWR0aGAgdmFsdWUuXHJcbiAgICAgICAqIEBwcm90ZWN0ZWRcclxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6ICdfd2lkdGhCcmVha3BvaW50JyxcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfd2lkdGhCcmVha3BvaW50KCkge1xuXG4gICAgICAgIGlmICh3aW5kb3cuaW5uZXJXaWR0aCA8PSB0aGlzLm9wdGlvbnMubWluV2lkdGgpIHtcbiAgICAgICAgICB0aGlzLl9icmVha3BvaW50ID0gdHJ1ZTtcbiAgICAgICAgICB0aGlzLmFmZml4ZWRUeXBlID0gJ1NUQVRJQyc7XG5cbiAgICAgICAgICB0aGlzLnNpZGViYXIucmVtb3ZlQXR0cmlidXRlKCdzdHlsZScpO1xuICAgICAgICAgIFN0aWNreVNpZGViYXIucmVtb3ZlQ2xhc3ModGhpcy5zaWRlYmFyLCB0aGlzLm9wdGlvbnMuc3RpY2t5Q2xhc3MpO1xuICAgICAgICAgIHRoaXMuc2lkZWJhcklubmVyLnJlbW92ZUF0dHJpYnV0ZSgnc3R5bGUnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLl9icmVha3BvaW50ID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLyoqXHJcbiAgICAgICAqIFN3aXRjaGVzIGJldHdlZW4gZnVuY3Rpb25zIHN0YWNrIGZvciBlYWNoIGV2ZW50IHR5cGUsIGlmIHRoZXJlJ3Mgbm8gXHJcbiAgICAgICAqIGV2ZW50LCBpdCB3aWxsIHJlLWluaXRpYWxpemUgc3RpY2t5IHNpZGViYXIuXHJcbiAgICAgICAqIEBwdWJsaWNcclxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6ICd1cGRhdGVTdGlja3knLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIHVwZGF0ZVN0aWNreSgpIHtcbiAgICAgICAgdmFyIF90aGlzMyA9IHRoaXM7XG5cbiAgICAgICAgdmFyIGV2ZW50ID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fTtcblxuICAgICAgICBpZiAodGhpcy5fcnVubmluZykgcmV0dXJuO1xuICAgICAgICB0aGlzLl9ydW5uaW5nID0gdHJ1ZTtcblxuICAgICAgICAoZnVuY3Rpb24gKGV2ZW50VHlwZSkge1xuXG4gICAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHN3aXRjaCAoZXZlbnRUeXBlKSB7XG4gICAgICAgICAgICAgIC8vIFdoZW4gYnJvd3NlciBpcyBzY3JvbGxpbmcgYW5kIHJlLWNhbGN1bGF0ZSBqdXN0IGRpbWVuc2lvbnNcbiAgICAgICAgICAgICAgLy8gd2l0aGluIHNjcm9sbC4gXG4gICAgICAgICAgICAgIGNhc2UgJ3Njcm9sbCc6XG4gICAgICAgICAgICAgICAgX3RoaXMzLl9jYWxjRGltZW5zaW9uc1dpdGhTY3JvbGwoKTtcbiAgICAgICAgICAgICAgICBfdGhpczMub2JzZXJ2ZVNjcm9sbERpcigpO1xuICAgICAgICAgICAgICAgIF90aGlzMy5zdGlja3lQb3NpdGlvbigpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgIC8vIFdoZW4gYnJvd3NlciBpcyByZXNpemluZyBvciB0aGVyZSdzIG5vIGV2ZW50LCBvYnNlcnZlIHdpZHRoXG4gICAgICAgICAgICAgIC8vIGJyZWFrcG9pbnQgYW5kIHJlLWNhbGN1bGF0ZSBkaW1lbnNpb25zLlxuICAgICAgICAgICAgICBjYXNlICdyZXNpemUnOlxuICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIF90aGlzMy5fd2lkdGhCcmVha3BvaW50KCk7XG4gICAgICAgICAgICAgICAgX3RoaXMzLmNhbGNEaW1lbnNpb25zKCk7XG4gICAgICAgICAgICAgICAgX3RoaXMzLnN0aWNreVBvc2l0aW9uKHRydWUpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgX3RoaXMzLl9ydW5uaW5nID0gZmFsc2U7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pKGV2ZW50LnR5cGUpO1xuICAgICAgfVxuXG4gICAgICAvKipcclxuICAgICAgICogU2V0IGJyb3dzZXIgc3VwcG9ydCBmZWF0dXJlcyB0byB0aGUgcHVibGljIHByb3BlcnR5LlxyXG4gICAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogJ19zZXRTdXBwb3J0RmVhdHVyZXMnLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9zZXRTdXBwb3J0RmVhdHVyZXMoKSB7XG4gICAgICAgIHZhciBzdXBwb3J0ID0gdGhpcy5zdXBwb3J0O1xuXG4gICAgICAgIHN1cHBvcnQudHJhbnNmb3JtID0gU3RpY2t5U2lkZWJhci5zdXBwb3J0VHJhbnNmb3JtKCk7XG4gICAgICAgIHN1cHBvcnQudHJhbnNmb3JtM2QgPSBTdGlja3lTaWRlYmFyLnN1cHBvcnRUcmFuc2Zvcm0odHJ1ZSk7XG4gICAgICB9XG5cbiAgICAgIC8qKlxyXG4gICAgICAgKiBHZXQgdHJhbnNsYXRlIHZhbHVlLCBpZiB0aGUgYnJvd3NlciBzdXBwb3J0cyB0cmFuc2Zyb20zZCwgaXQgd2lsbCBhZG9wdCBpdC5cclxuICAgICAgICogYW5kIHRoZSBzYW1lIHdpdGggdHJhbnNsYXRlLiBpZiBicm93c2VyIGRvZXNuJ3Qgc3VwcG9ydCBib3RoIHJldHVybiBmYWxzZS5cclxuICAgICAgICogQHBhcmFtIHtOdW1iZXJ9IHkgLSBWYWx1ZSBvZiBZLWF4aXMuXHJcbiAgICAgICAqIEBwYXJhbSB7TnVtYmVyfSB4IC0gVmFsdWUgb2YgWC1heGlzLlxyXG4gICAgICAgKiBAcGFyYW0ge051bWJlcn0geiAtIFZhbHVlIG9mIFotYXhpcy5cclxuICAgICAgICogQHJldHVybiB7U3RyaW5nfEZhbHNlfVxyXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogJ19nZXRUcmFuc2xhdGUnLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9nZXRUcmFuc2xhdGUoKSB7XG4gICAgICAgIHZhciB5ID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiAwO1xuICAgICAgICB2YXIgeCA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogMDtcbiAgICAgICAgdmFyIHogPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6IDA7XG5cbiAgICAgICAgaWYgKHRoaXMuc3VwcG9ydC50cmFuc2Zvcm0zZCkgcmV0dXJuICd0cmFuc2xhdGUzZCgnICsgeSArICcsICcgKyB4ICsgJywgJyArIHogKyAnKSc7ZWxzZSBpZiAodGhpcy5zdXBwb3J0LnRyYW5zbGF0ZSkgcmV0dXJuICd0cmFuc2xhdGUoJyArIHkgKyAnLCAnICsgeCArICcpJztlbHNlIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgLyoqXHJcbiAgICAgICAqIERlc3Ryb3kgc3RpY2t5IHNpZGViYXIgcGx1Z2luLlxyXG4gICAgICAgKiBAcHVibGljXHJcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiAnZGVzdHJveScsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZGVzdHJveSgpIHtcbiAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHRoaXMsIHsgY2FwdGlvbjogZmFsc2UgfSk7XG4gICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdzY3JvbGwnLCB0aGlzLCB7IGNhcHRpb246IGZhbHNlIH0pO1xuXG4gICAgICAgIHRoaXMuc2lkZWJhci5jbGFzc0xpc3QucmVtb3ZlKHRoaXMub3B0aW9ucy5zdGlja3lDbGFzcyk7XG4gICAgICAgIHRoaXMuc2lkZWJhci5zdHlsZS5taW5IZWlnaHQgPSAnJztcblxuICAgICAgICB0aGlzLnNpZGViYXIucmVtb3ZlRXZlbnRMaXN0ZW5lcigndXBkYXRlJyArIEVWRU5UX0tFWSwgdGhpcyk7XG5cbiAgICAgICAgdmFyIHN0eWxlUmVzZXQgPSB7IGlubmVyOiB7fSwgb3V0ZXI6IHt9IH07XG5cbiAgICAgICAgc3R5bGVSZXNldC5pbm5lciA9IHsgcG9zaXRpb246ICcnLCB0b3A6ICcnLCBsZWZ0OiAnJywgYm90dG9tOiAnJywgd2lkdGg6ICcnLCB0cmFuc2Zvcm06ICcnIH07XG4gICAgICAgIHN0eWxlUmVzZXQub3V0ZXIgPSB7IGhlaWdodDogJycsIHBvc2l0aW9uOiAnJyB9O1xuXG4gICAgICAgIGZvciAodmFyIGtleSBpbiBzdHlsZVJlc2V0Lm91dGVyKSB7XG4gICAgICAgICAgdGhpcy5zaWRlYmFyLnN0eWxlW2tleV0gPSBzdHlsZVJlc2V0Lm91dGVyW2tleV07XG4gICAgICAgIH1mb3IgKHZhciBfa2V5MiBpbiBzdHlsZVJlc2V0LmlubmVyKSB7XG4gICAgICAgICAgdGhpcy5zaWRlYmFySW5uZXIuc3R5bGVbX2tleTJdID0gc3R5bGVSZXNldC5pbm5lcltfa2V5Ml07XG4gICAgICAgIH1pZiAodGhpcy5vcHRpb25zLnJlc2l6ZVNlbnNvciAmJiAndW5kZWZpbmVkJyAhPT0gdHlwZW9mIFJlc2l6ZVNlbnNvcikge1xuICAgICAgICAgIFJlc2l6ZVNlbnNvci5kZXRhY2godGhpcy5zaWRlYmFySW5uZXIsIHRoaXMuaGFuZGxlRXZlbnQpO1xuICAgICAgICAgIFJlc2l6ZVNlbnNvci5kZXRhY2godGhpcy5jb250YWluZXIsIHRoaXMuaGFuZGxlRXZlbnQpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8qKlxyXG4gICAgICAgKiBEZXRlcm1pbmUgaWYgdGhlIGJyb3dzZXIgc3VwcG9ydHMgQ1NTIHRyYW5zZm9ybSBmZWF0dXJlLlxyXG4gICAgICAgKiBAZnVuY3Rpb25cclxuICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IHRyYW5zZm9ybTNkIC0gRGV0ZWN0IHRyYW5zZm9ybSB3aXRoIHRyYW5zbGF0ZTNkLlxyXG4gICAgICAgKiBAcmV0dXJuIHtTdHJpbmd9XHJcbiAgICAgICAqL1xuXG4gICAgfV0sIFt7XG4gICAgICBrZXk6ICdzdXBwb3J0VHJhbnNmb3JtJyxcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBzdXBwb3J0VHJhbnNmb3JtKHRyYW5zZm9ybTNkKSB7XG4gICAgICAgIHZhciByZXN1bHQgPSBmYWxzZSxcbiAgICAgICAgICAgIHByb3BlcnR5ID0gdHJhbnNmb3JtM2QgPyAncGVyc3BlY3RpdmUnIDogJ3RyYW5zZm9ybScsXG4gICAgICAgICAgICB1cHBlciA9IHByb3BlcnR5LmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgcHJvcGVydHkuc2xpY2UoMSksXG4gICAgICAgICAgICBwcmVmaXhlcyA9IFsnV2Via2l0JywgJ01veicsICdPJywgJ21zJ10sXG4gICAgICAgICAgICBzdXBwb3J0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3VwcG9ydCcpLFxuICAgICAgICAgICAgc3R5bGUgPSBzdXBwb3J0LnN0eWxlO1xuXG4gICAgICAgIChwcm9wZXJ0eSArICcgJyArIHByZWZpeGVzLmpvaW4odXBwZXIgKyAnICcpICsgdXBwZXIpLnNwbGl0KCcgJykuZm9yRWFjaChmdW5jdGlvbiAocHJvcGVydHksIGkpIHtcbiAgICAgICAgICBpZiAoc3R5bGVbcHJvcGVydHldICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJlc3VsdCA9IHByb3BlcnR5O1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9XG5cbiAgICAgIC8qKlxyXG4gICAgICAgKiBUcmlnZ2VyIGN1c3RvbSBldmVudC5cclxuICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgKiBAcGFyYW0ge0RPTU9iamVjdH0gZWxlbWVudCAtIFRhcmdldCBlbGVtZW50IG9uIHRoZSBET00uXHJcbiAgICAgICAqIEBwYXJhbSB7U3RyaW5nfSBldmVudE5hbWUgLSBFdmVudCBuYW1lLlxyXG4gICAgICAgKiBAcGFyYW0ge09iamVjdH0gZGF0YSAtIFxyXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogJ2V2ZW50VHJpZ2dlcicsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZXZlbnRUcmlnZ2VyKGVsZW1lbnQsIGV2ZW50TmFtZSwgZGF0YSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIHZhciBldmVudCA9IG5ldyBDdXN0b21FdmVudChldmVudE5hbWUsIHsgZGV0YWlsOiBkYXRhIH0pO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgdmFyIGV2ZW50ID0gZG9jdW1lbnQuY3JlYXRlRXZlbnQoJ0N1c3RvbUV2ZW50Jyk7XG4gICAgICAgICAgZXZlbnQuaW5pdEN1c3RvbUV2ZW50KGV2ZW50TmFtZSwgdHJ1ZSwgdHJ1ZSwgZGF0YSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxlbWVudC5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcbiAgICAgIH1cblxuICAgICAgLyoqXHJcbiAgICAgICAqIEV4dGVuZCBvcHRpb25zIG9iamVjdCB3aXRoIGRlZmF1bHRzLlxyXG4gICAgICAgKiBAZnVuY3Rpb25cclxuICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogJ2V4dGVuZCcsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZXh0ZW5kKGRlZmF1bHRzLCBvcHRpb25zKSB7XG4gICAgICAgIHZhciByZXN1bHRzID0ge307XG4gICAgICAgIGZvciAodmFyIGtleSBpbiBkZWZhdWx0cykge1xuICAgICAgICAgIGlmICgndW5kZWZpbmVkJyAhPT0gdHlwZW9mIG9wdGlvbnNba2V5XSkgcmVzdWx0c1trZXldID0gb3B0aW9uc1trZXldO2Vsc2UgcmVzdWx0c1trZXldID0gZGVmYXVsdHNba2V5XTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0cztcbiAgICAgIH1cblxuICAgICAgLyoqXHJcbiAgICAgICAqIEdldCBjdXJyZW50IGNvb3JkaW5hdGVzIGxlZnQgYW5kIHRvcCBvZiBzcGVjaWZpYyBlbGVtZW50LlxyXG4gICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiAnb2Zmc2V0UmVsYXRpdmUnLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIG9mZnNldFJlbGF0aXZlKGVsZW1lbnQpIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IHsgbGVmdDogMCwgdG9wOiAwIH07XG5cbiAgICAgICAgZG8ge1xuICAgICAgICAgIHZhciBvZmZzZXRUb3AgPSBlbGVtZW50Lm9mZnNldFRvcDtcbiAgICAgICAgICB2YXIgb2Zmc2V0TGVmdCA9IGVsZW1lbnQub2Zmc2V0TGVmdDtcblxuICAgICAgICAgIGlmICghaXNOYU4ob2Zmc2V0VG9wKSkgcmVzdWx0LnRvcCArPSBvZmZzZXRUb3A7XG5cbiAgICAgICAgICBpZiAoIWlzTmFOKG9mZnNldExlZnQpKSByZXN1bHQubGVmdCArPSBvZmZzZXRMZWZ0O1xuXG4gICAgICAgICAgZWxlbWVudCA9ICdCT0RZJyA9PT0gZWxlbWVudC50YWdOYW1lID8gZWxlbWVudC5wYXJlbnRFbGVtZW50IDogZWxlbWVudC5vZmZzZXRQYXJlbnQ7XG4gICAgICAgIH0gd2hpbGUgKGVsZW1lbnQpO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfVxuXG4gICAgICAvKipcclxuICAgICAgICogQWRkIHNwZWNpZmljIGNsYXNzIG5hbWUgdG8gc3BlY2lmaWMgZWxlbWVudC5cclxuICAgICAgICogQHN0YXRpYyBcclxuICAgICAgICogQHBhcmFtIHtPYmplY3RET019IGVsZW1lbnQgXHJcbiAgICAgICAqIEBwYXJhbSB7U3RyaW5nfSBjbGFzc05hbWUgXHJcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiAnYWRkQ2xhc3MnLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGFkZENsYXNzKGVsZW1lbnQsIGNsYXNzTmFtZSkge1xuICAgICAgICBpZiAoIVN0aWNreVNpZGViYXIuaGFzQ2xhc3MoZWxlbWVudCwgY2xhc3NOYW1lKSkge1xuICAgICAgICAgIGlmIChlbGVtZW50LmNsYXNzTGlzdCkgZWxlbWVudC5jbGFzc0xpc3QuYWRkKGNsYXNzTmFtZSk7ZWxzZSBlbGVtZW50LmNsYXNzTmFtZSArPSAnICcgKyBjbGFzc05hbWU7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLyoqXHJcbiAgICAgICAqIFJlbW92ZSBzcGVjaWZpYyBjbGFzcyBuYW1lIHRvIHNwZWNpZmljIGVsZW1lbnRcclxuICAgICAgICogQHN0YXRpY1xyXG4gICAgICAgKiBAcGFyYW0ge09iamVjdERPTX0gZWxlbWVudCBcclxuICAgICAgICogQHBhcmFtIHtTdHJpbmd9IGNsYXNzTmFtZSBcclxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6ICdyZW1vdmVDbGFzcycsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gcmVtb3ZlQ2xhc3MoZWxlbWVudCwgY2xhc3NOYW1lKSB7XG4gICAgICAgIGlmIChTdGlja3lTaWRlYmFyLmhhc0NsYXNzKGVsZW1lbnQsIGNsYXNzTmFtZSkpIHtcbiAgICAgICAgICBpZiAoZWxlbWVudC5jbGFzc0xpc3QpIGVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShjbGFzc05hbWUpO2Vsc2UgZWxlbWVudC5jbGFzc05hbWUgPSBlbGVtZW50LmNsYXNzTmFtZS5yZXBsYWNlKG5ldyBSZWdFeHAoJyhefFxcXFxiKScgKyBjbGFzc05hbWUuc3BsaXQoJyAnKS5qb2luKCd8JykgKyAnKFxcXFxifCQpJywgJ2dpJyksICcgJyk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLyoqXHJcbiAgICAgICAqIERldGVybWluZSB3ZWF0aGVyIHRoZSBlbGVtZW50IGhhcyBzcGVjaWZpYyBjbGFzcyBuYW1lLlxyXG4gICAgICAgKiBAc3RhdGljXHJcbiAgICAgICAqIEBwYXJhbSB7T2JqZWN0RE9NfSBlbGVtZW50IFxyXG4gICAgICAgKiBAcGFyYW0ge1N0cmluZ30gY2xhc3NOYW1lIFxyXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogJ2hhc0NsYXNzJyxcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBoYXNDbGFzcyhlbGVtZW50LCBjbGFzc05hbWUpIHtcbiAgICAgICAgaWYgKGVsZW1lbnQuY2xhc3NMaXN0KSByZXR1cm4gZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoY2xhc3NOYW1lKTtlbHNlIHJldHVybiBuZXcgUmVnRXhwKCcoXnwgKScgKyBjbGFzc05hbWUgKyAnKCB8JCknLCAnZ2knKS50ZXN0KGVsZW1lbnQuY2xhc3NOYW1lKTtcbiAgICAgIH1cbiAgICB9XSk7XG5cbiAgICByZXR1cm4gU3RpY2t5U2lkZWJhcjtcbiAgfSgpO1xuXG4gIHJldHVybiBTdGlja3lTaWRlYmFyO1xufSgpO1xuXG4vLyBHbG9iYWxcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbndpbmRvdy5TdGlja3lTaWRlYmFyID0gU3RpY2t5U2lkZWJhcjtcblxuKGZ1bmN0aW9uICgpIHtcbiAgaWYgKCd1bmRlZmluZWQnID09PSB0eXBlb2Ygd2luZG93KSByZXR1cm47XG5cbiAgdmFyIHBsdWdpbiA9IHdpbmRvdy4kIHx8IHdpbmRvdy5qUXVlcnkgfHwgd2luZG93LlplcHRvO1xuICB2YXIgREFUQV9OQU1FU1BBQ0UgPSAnc3RpY2t5U2lkZWJhcic7XG5cbiAgLy8gTWFrZSBzdXJlIHRoZSBzaXRlIGhhcyBqcXVlcnkgb3IgemVwdG8gcGx1Z2luLlxuICBpZiAocGx1Z2luKSB7XG4gICAgLyoqXHJcbiAgICAgKiBTdGlja3kgU2lkZWJhciBQbHVnaW4gRGVmaW50aW9uLlxyXG4gICAgICogQHBhcmFtIHtPYmplY3R8U3RyaW5nfSAtIGNvbmZpZ1xyXG4gICAgICovXG4gICAgdmFyIF9qUXVlcnlQbHVnaW4gPSBmdW5jdGlvbiAoY29uZmlnKSB7XG4gICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyICR0aGlzID0gcGx1Z2luKHRoaXMpLFxuICAgICAgICAgICAgZGF0YSA9IHBsdWdpbih0aGlzKS5kYXRhKERBVEFfTkFNRVNQQUNFKTtcblxuICAgICAgICBpZiAoIWRhdGEpIHtcbiAgICAgICAgICBkYXRhID0gbmV3IFN0aWNreVNpZGViYXIodGhpcywgdHlwZW9mIGNvbmZpZyA9PSAnb2JqZWN0JyAmJiBjb25maWcpO1xuICAgICAgICAgICR0aGlzLmRhdGEoREFUQV9OQU1FU1BBQ0UsIGRhdGEpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCdzdHJpbmcnID09PSB0eXBlb2YgY29uZmlnKSB7XG4gICAgICAgICAgaWYgKGRhdGFbY29uZmlnXSA9PT0gdW5kZWZpbmVkICYmIFsnZGVzdHJveScsICd1cGRhdGVTdGlja3knXS5pbmRleE9mKGNvbmZpZykgPT09IC0xKSB0aHJvdyBuZXcgRXJyb3IoJ05vIG1ldGhvZCBuYW1lZCBcIicgKyBjb25maWcgKyAnXCInKTtcblxuICAgICAgICAgIGRhdGFbY29uZmlnXSgpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgcGx1Z2luLmZuLnN0aWNreVNpZGViYXIgPSBfalF1ZXJ5UGx1Z2luO1xuICAgIHBsdWdpbi5mbi5zdGlja3lTaWRlYmFyLkNvbnN0cnVjdG9yID0gU3RpY2t5U2lkZWJhcjtcblxuICAgIHZhciBvbGQgPSBwbHVnaW4uZm4uc3RpY2t5U2lkZWJhcjtcblxuICAgIC8qKlxyXG4gICAgICogU3RpY2t5IFNpZGViYXIgTm8gQ29uZmxpY3QuXHJcbiAgICAgKi9cbiAgICBwbHVnaW4uZm4uc3RpY2t5U2lkZWJhci5ub0NvbmZsaWN0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgcGx1Z2luLmZuLnN0aWNreVNpZGViYXIgPSBvbGQ7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICB9XG59KSgpO1xuXG59KSkpO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1qcXVlcnkuc3RpY2t5LXNpZGViYXIuanMubWFwXG4iXX0=
